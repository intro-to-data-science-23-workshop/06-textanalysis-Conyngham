<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Killian, Luca, Aranxa" />


<title>Quanteda</title>

<script src="Live_Tutorial_files/header-attrs-2.24/header-attrs.js"></script>
<script src="Live_Tutorial_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="Live_Tutorial_files/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="Live_Tutorial_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="Live_Tutorial_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="Live_Tutorial_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="Live_Tutorial_files/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="Live_Tutorial_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="Live_Tutorial_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="Live_Tutorial_files/navigation-1.1/tabsets.js"></script>
<link href="Live_Tutorial_files/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="Live_Tutorial_files/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="custom.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">



<h1 class="title toc-ignore">Quanteda</h1>
<h3 class="subtitle">Quantitative Text Analyis</h3>
<h4 class="author">Killian, Luca, Aranxa</h4>

</div>


<div id="welcome" class="section level1">
<h1>Welcome!👋</h1>
<p>This Workshop introduces you to quanteda, an R package for
quantitative text analysis.</p>
</div>
<div id="text-analysis" class="section level1">
<h1>Text Analysis 📚</h1>
<p>Why do we want to analyze textual data? Text is everywhere, grows in
volume and becomes more easily accessible as we speak. Main reasons for
this are the widespread use of social media and the digitalisation of
many aspects of our lives, making lots of data available for (social
science) research. Natural language processing provides us with the
fundamental tools and methods to analyse text data.</p>
<div id="natural-language-processing" class="section level3">
<h3>Natural Language Processing</h3>
<p>Natural Language Processing (NLP) is concerned with enabling
computers/machines to process, understand, interpret and even generate
natural language, for example in the form of text or speech. Some
examples of applications using NLP are chatbots, speech recognition,
sentiment analysis, Google Translate, automatic text summarization, and
more.</p>
</div>
<div id="quantitative-text-analysis" class="section level3">
<h3>Quantitative Text Analysis</h3>
<p>Quantitative text analysis is a subfield of NLP and refers to the
process of analyzing text data using statistical and computational
methods to derive quantitative information from the input text. Some
examples of quantitative text analysis include word frequency analysis,
keyword extraction, sentiment analysis, text visualization, and more.
All of this can be done using the R package quanteda!</p>
</div>
</div>
<div id="quanteda" class="section level1">
<h1>Quanteda 💡</h1>
<div id="background" class="section level3">
<h3>Background</h3>
<p>Quanteda is an R packagae for managing and analysing textual data. It
was founded by <a href="https://kenbenoit.net">Ken Benoit</a> and is
available via <a
href="https://cran.r-project.org/web/packages/quanteda/index.html">CRAN</a>.
The latest update of quanteda is version 4.0 and the package is
maintained by the UK-based non-profit company <a
href="https://quanteda.org">Quanteda Initiative</a>.</p>
<p>Since Version 3.0, quanteda has been split into modular packages.
These consist of:</p>
<p><strong>quanteda:</strong> Contains all core natural language
processing and textual data management functions</p>
<p><strong>quanteda.textmodels:</strong> - Contains all text models and
supporting functions - Textmodel_* functions</p>
<p><strong>quanteda.textstats:</strong> - Statistics for textual data -
textstat_*() functions</p>
<p><strong>quanteda.textplots:</strong> - Plots for textual data -
textplot_*() functions</p>
<p>Additionally available via GitHub:</p>
<p><strong>quanteda.sentiment:</strong> - Sentiment analysis using
dictionaries</p>
<p><strong>quanteda.tidy:</strong> - Extensions for manipulating
document variables in core quanteda objects using tidyverse
functions</p>
</div>
</div>
<div id="quanteda-basics" class="section level1">
<h1>Quanteda Basics 📝</h1>
<div id="main-objects" class="section level3">
<h3>Main Objects</h3>
<div id="corpus" class="section level4">
<h4>Corpus</h4>
</div>
<div id="tokens" class="section level4">
<h4>Tokens</h4>
</div>
<div id="document-feature-matrix" class="section level4">
<h4>Document Feature Matrix</h4>
</div>
</div>
</div>
<div id="workflow" class="section level1">
<h1>Workflow 💪</h1>
<div id="getting-started" class="section level4">
<h4>Getting started</h4>
<p>First we load the core quanteda package.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">#install.packages(&#39;quanteda&#39;)</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co">#library(quanteda)</span></span></code></pre></div>
<p>Additionally, we load the <a
href="https://readtext.quanteda.io">readtext package</a></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co">#install.packages(&#39;readtext&#39;)</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co">#library(readtext)</span></span></code></pre></div>
<p>The readtext package provides an easy way to read text data into R,
from almost any input format.</p>
</div>
<div id="main-functions" class="section level4">
<h4>Main Functions</h4>
</div>
</div>
<div id="why-quanteda" class="section level1">
<h1>Why quanteda? ✅</h1>
<hr />
</div>
<div id="loading-the-package" class="section level1">
<h1>Loading the package</h1>
<p>If</p>
<p>First we load the core of the quanteda package. If any of the
packages are not installed on your machine you can uncomment the first
line.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co">#install.packages(&#39;quanteda&#39;,&#39;quanteda.textstats&#39;,&#39;readtext&#39;)</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span></code></pre></div>
<pre><code>## Package version: 3.3.1
## Unicode version: 13.0
## ICU version: 69.1</code></pre>
<pre><code>## Parallel computing: 8 of 8 threads used.</code></pre>
<pre><code>## See https://quanteda.io for tutorials and examples.</code></pre>
<p>The package is split in to modular packages so we also download a
selection of those of interest to us in this tutorial.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">library</span>(quanteda.textstats)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span></code></pre></div>
<p>Finally we load readtext which makes the process of importing texts
easier, and also imports meta data. Specifically in our case, it allows
us to read in pdfs as text files.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">library</span>(readtext)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;readtext&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:quanteda&#39;:
## 
##     texts</code></pre>
</div>
<div id="loading-and-prepping-our-data---the-corpus"
class="section level1">
<h1>Loading and prepping our data - The Corpus</h1>
<p>For the example in this tutorial we will load in a collection of
slides from the Intro to Data Science Course by Simon Munzert. We use
the readtext function as mentioned above.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>ids_presentations_df <span class="ot">=</span> <span class="fu">readtext</span>(<span class="st">&quot;./Slideshows/*.pdf&quot;</span>, <span class="at">docvarsfrom =</span> <span class="st">&quot;filenames&quot;</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="co">#rt_pdf = readtext(&quot;./Slideshows/*.pdf&quot;, docvarsfrom = &quot;filenames&quot;, dvsep = &quot;-&quot;)</span></span></code></pre></div>
<div id="adding-your-own-slideshow" class="section level2">
<h2>Adding your own slideshow</h2>
<p>We encourage you to add your own slideshow in pdf format. To do this,
just insert the pdf file in the Input folder and delete any other
contents. For demonstration purposes we have included the slideshow you
just one, but we think that this demonstration will be more interesting
and fun if you can add your own data.</p>
<p>We will then add the text and info on the presentation such as it’s
title to our presentations data frame. This is straightforward as
readtext will give us the same variable names for both imports. We also
add an indicator variable which tells us which presentation is the
‘extra’ one we added. This will be important later for some of the
analysis we want to do.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>your_presentation_df <span class="ot">=</span> <span class="fu">readtext</span>(<span class="st">&quot;./Import/*.pdf&quot;</span>, <span class="at">docvarsfrom =</span> <span class="st">&quot;filenames&quot;</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">nrow</span>(your_presentation_df) <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="fu">stop</span>(<span class="st">&quot;More than one pdf in Import folder, please remove extras&quot;</span>) </span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>your_presentation_df<span class="sc">$</span>yourpresentation <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">TRUE</span>)</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>ids_presentations_df<span class="sc">$</span>yourpresentation <span class="ot">=</span> <span class="fu">rep</span>(<span class="cn">FALSE</span>,<span class="at">rep=</span><span class="fu">nrow</span>(ids_presentations_df))</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#These two lines create the variable your presentation and set it to true only for the presentation imported from the Import folder</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>presentations_df <span class="ot">=</span> <span class="fu">rbind</span>(ids_presentations_df, your_presentation_df)</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="fu">print</span>(presentations_df, <span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## readtext object consisting of 8 documents and 2 docvars.
## # A data frame: 8 × 4
##   doc_id                     text                docvar1        yourpresentation
##   &lt;chr&gt;                      &lt;chr&gt;               &lt;chr&gt;          &lt;lgl&gt;           
## 1 00-tidyverse.pdf           &quot;\&quot;Introducti\&quot;...&quot; 00-tidyverse   FALSE           
## 2 01-introduction.pdf        &quot;\&quot;Introducti\&quot;...&quot; 01-introducti… FALSE           
## 3 02-version-control.pdf     &quot;\&quot;Introducti\&quot;...&quot; 02-version-co… FALSE           
## 4 03-ethics.pdf              &quot;\&quot;Introducti\&quot;...&quot; 03-ethics      FALSE           
## 5 04-functions-debugging.pdf &quot;\&quot;Introducti\&quot;...&quot; 04-functions-… FALSE           
## 6 05-databases.pdf           &quot;\&quot;Introducti\&quot;...&quot; 05-databases   FALSE           
## 7 06-webdata.pdf             &quot;\&quot;Introducti\&quot;...&quot; 06-webdata     FALSE           
## 8 09-modeling.pdf            &quot;\&quot;Introducti\&quot;...&quot; 09-modeling    TRUE</code></pre>
<p>Here we can see the structure of our dataframe. Luckily for us,
readtext automatically formats the dataframe as quantedata expects them,
but for furute reference if you are constructing your own dataframes for
analysis, the text for analysis for each row (which will be each unique
text, presentation, section or any other unit of analysis) must be in a
column called ‘text’.</p>
</div>
<div id="creating-a-corpus" class="section level2">
<h2>Creating a Corpus</h2>
<p>We can now create our first Corpus - this is the object at the centre
of the quanteda package.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>presentations_corpus <span class="ot">=</span> <span class="fu">corpus</span>(presentations_df)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="fu">summary</span>(presentations_corpus)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Text"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Types"],"name":[2],"type":["int"],"align":["right"]},{"label":["Tokens"],"name":[3],"type":["int"],"align":["right"]},{"label":["Sentences"],"name":[4],"type":["int"],"align":["right"]},{"label":["docvar1"],"name":[5],"type":["chr"],"align":["left"]},{"label":["yourpresentation"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"00-tidyverse.pdf","2":"1679","3":"10305","4":"264","5":"00-tidyverse","6":"FALSE","_rn_":"1"},{"1":"01-introduction.pdf","2":"825","3":"2907","4":"121","5":"01-introduction","6":"FALSE","_rn_":"2"},{"1":"02-version-control.pdf","2":"1554","3":"10083","4":"616","5":"02-version-control","6":"FALSE","_rn_":"3"},{"1":"03-ethics.pdf","2":"850","3":"3874","4":"231","5":"03-ethics","6":"FALSE","_rn_":"4"},{"1":"04-functions-debugging.pdf","2":"1238","3":"7361","4":"279","5":"04-functions-debugging","6":"FALSE","_rn_":"5"},{"1":"05-databases.pdf","2":"1694","3":"10029","4":"389","5":"05-databases","6":"FALSE","_rn_":"6"},{"1":"06-webdata.pdf","2":"1462","3":"8439","4":"306","5":"06-webdata","6":"FALSE","_rn_":"7"},{"1":"09-modeling.pdf","2":"1685","3":"9406","4":"246","5":"09-modeling","6":"TRUE","_rn_":"8"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Here we see the corpus structure with some information about the text
in each slideshow, plus the document-level variables we added
earlier.</p>
</div>
</div>
<div
id="preparing-our-texts-for-non-relational-analysis---tokens-and-the-dfm"
class="section level1">
<h1>Preparing our texts for non-relational analysis - Tokens and the
DFM</h1>
<p>Now that we have our corpus we can begin to analyse the text data.
For this section we will focus on non-relational analysis, i.e. we will
look at the presence and frequency of words in each slideshow,
regardless of their context. The first process our data will undergo is
tokenisation. This splits up the text of each document into tokens,
which are usually words, but can be other standalone character
units.</p>
<p>Once we have tokenised our corpus we can create a Document feature
matrix. This (insert infor about DFM).</p>
<p>Finally, we run the function top features, to have a look at the most
common tokens in the entire corpus. This is our first analysis function,
just to get an overview, but we will dive into more later.</p>
<p>Don’t worry if this process of tokenisation and constructing a dfm
still feels unclear, we will go over it a few times, and you’ll have a
chance to adjust the process yourselves.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>presentation_tokens <span class="ot">=</span> <span class="fu">tokens</span>(presentations_corpus)</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>presentation_dfm <span class="ot">=</span> <span class="fu">dfm</span>(presentation_tokens)</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="fu">print</span>(presentation_dfm)</span></code></pre></div>
<pre><code>## Document-feature matrix of: 8 documents, 5,292 features (76.49% sparse) and 2 docvars.
##                             features
## docs                         introduction  to data science session 0   :   r
##   00-tidyverse.pdf                      1  99   48       6       4 5 194 119
##   01-introduction.pdf                   2  43   64      34       6 0  42  19
##   02-version-control.pdf                1 239   31      11       5 1 122  17
##   03-ethics.pdf                         1  60   32      15       1 0  65   0
##   04-functions-debugging.pdf            1 152   22       7       1 2 118  94
##   05-databases.pdf                      2 183  132       2       2 0 157  71
##                             features
## docs                         and the
##   00-tidyverse.pdf            65 143
##   01-introduction.pdf         54  97
##   02-version-control.pdf     132 342
##   03-ethics.pdf               83 117
##   04-functions-debugging.pdf  64 198
##   05-databases.pdf            99 284
## [ reached max_ndoc ... 2 more documents, reached max_nfeat ... 5,282 more features ]</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">topfeatures</span>(presentation_dfm)</span></code></pre></div>
<pre><code>##    .    ,    )    (  the    &quot;    #    &gt;    :   to 
## 2962 2343 1672 1658 1626 1408 1207 1160 1060 1016</code></pre>
<p>Looking at this, we can see that all the most common tokens by far
are punctuation or filler words which don’t carry much meaning. This is
normal, and luckily quantedata comes built-in with some handy functions
and options to help alleviate this.</p>
<p>The first thing we can do is adjust the parameters on the function
tokens(), allowing us to remove punctuation, numbers and symbols.</p>
<p>An even more powerful tool is the token_remove function combined with
the build in stopwords database. Quantedata comes loaded with common
filler words or stop words for _ different languages. Removing these may
help us with our analysis.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>presentation_tokens <span class="ot">=</span> <span class="fu">tokens</span>(presentations_corpus, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>, <span class="at">remove_numbers =</span> <span class="cn">TRUE</span>, <span class="at">remove_symbols =</span> <span class="cn">TRUE</span>)</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>presentation_tokens <span class="ot">=</span> <span class="fu">tokens_remove</span>(presentation_tokens, <span class="fu">stopwords</span>(<span class="st">&quot;en&quot;</span>))</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>presentation_dfm <span class="ot">=</span> <span class="fu">dfm</span>(presentation_tokens)</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="fu">topfeatures</span>(presentation_dfm)</span></code></pre></div>
<pre><code>##        r     data      can function      chr      git    model      use 
##      526      438      175      174      160      154      138      124 
##   github database 
##      108      104</code></pre>
<p>Now this looks more promising!</p>
<p>You can use your own discretion to decide whether punctuation,
numbers, symbols or stop words should be included or excluded in your
use case. It is also possible to remove words individually. For example,
I felt that ‘can’ and ‘use’ were not words that carried much useful
meaning, especially with their very high frequency in the data. Have a
look at the outputs above and see if there are any adjustments you would
make for our final tokenisation process.</p>
<p>(We repeat the whole process here for the sake of having it all in
once place as an overview)</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>presentation_tokens <span class="ot">=</span> <span class="fu">tokens</span>(presentations_corpus, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>, <span class="at">remove_numbers =</span> <span class="cn">TRUE</span>, <span class="at">remove_symbols =</span> <span class="cn">TRUE</span>,<span class="at">remove_url =</span> <span class="cn">TRUE</span>, <span class="at">remove_separators =</span> <span class="cn">TRUE</span>, <span class="at">split_hyphens =</span> <span class="cn">FALSE</span>, <span class="at">split_tags =</span> <span class="cn">FALSE</span>)<span class="co">#Do you think we should be excluding all these categories? Feel free to change these options as you feel makes the msot sense</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>presentation_tokens <span class="ot">=</span> <span class="fu">tokens_remove</span>(presentation_tokens, <span class="fu">stopwords</span>(<span class="st">&quot;en&quot;</span>))</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>presentation_tokens <span class="ot">=</span> <span class="fu">tokens_remove</span>(presentation_tokens, <span class="fu">c</span>(<span class="st">&#39;can&#39;</span>,<span class="st">&#39;use&#39;</span>)) <span class="co">#You can add any &#39;filler&#39; words here which you would like excluded from the analysis.</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>presentation_dfm <span class="ot">=</span> <span class="fu">dfm</span>(presentation_tokens)</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="fu">topfeatures</span>(presentation_dfm)</span></code></pre></div>
<pre><code>##        r     data function      chr      git    model   github database 
##      526      438      174      160      154      138      108      104 
##      one     repo 
##      102      101</code></pre>
<p>Now we have a nice looking Document Feature matrix for our further
analysis. For our live presentation we will stop here and move on to the
next section: Analysing text non-relationally, but if you would like to
learn some more about creating and tweaking corpuses continue below.</p>
</div>
<div id="analysing-our-texts-non-relationally" class="section level1">
<h1>Analysing our texts non-relationally</h1>
<p>There are many many functions across the quantedata family of
packages which can be used to analyse our newly created DFM, here we
will focus on some of the fucntions we foudn the most interesting from
the textstat and testplot packages.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">textstat_lexdiv</span>(presentation_dfm) </span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["document"],"name":[1],"type":["chr"],"align":["left"]},{"label":["TTR"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"00-tidyverse.pdf","2":"0.3048969"},{"1":"01-introduction.pdf","2":"0.4357585"},{"1":"02-version-control.pdf","2":"0.2551834"},{"1":"03-ethics.pdf","2":"0.3416621"},{"1":"04-functions-debugging.pdf","2":"0.3227191"},{"1":"05-databases.pdf","2":"0.2829484"},{"1":"06-webdata.pdf","2":"0.3248526"},{"1":"09-modeling.pdf","2":"0.3086221"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">textstat_dist</span>(presentation_dfm)</span></code></pre></div>
<pre><code>## textstat_dist object; method = &quot;euclidean&quot;
##                            00-tidyverse.pdf 01-introduction.pdf
## 00-tidyverse.pdf                          0                 259
## 01-introduction.pdf                     259                   0
## 02-version-control.pdf                  376                 295
## 03-ethics.pdf                           285                 141
## 04-functions-debugging.pdf              285                 237
## 05-databases.pdf                        296                 259
## 06-webdata.pdf                          282                 214
## 09-modeling.pdf                         282                 236
##                            02-version-control.pdf 03-ethics.pdf
## 00-tidyverse.pdf                              376           285
## 01-introduction.pdf                           295           141
## 02-version-control.pdf                          0           319
## 03-ethics.pdf                                 319             0
## 04-functions-debugging.pdf                    358           261
## 05-databases.pdf                              382           291
## 06-webdata.pdf                                348           243
## 09-modeling.pdf                               364           266
##                            04-functions-debugging.pdf 05-databases.pdf
## 00-tidyverse.pdf                                  285              296
## 01-introduction.pdf                               237              259
## 02-version-control.pdf                            358              382
## 03-ethics.pdf                                     261              291
## 04-functions-debugging.pdf                          0              319
## 05-databases.pdf                                  319                0
## 06-webdata.pdf                                    267              299
## 09-modeling.pdf                                   270              288
##                            06-webdata.pdf 09-modeling.pdf
## 00-tidyverse.pdf                      282             282
## 01-introduction.pdf                   214             236
## 02-version-control.pdf                348             364
## 03-ethics.pdf                         243             266
## 04-functions-debugging.pdf            267             270
## 05-databases.pdf                      299             288
## 06-webdata.pdf                          0             270
## 09-modeling.pdf                       270               0</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="fu">textstat_dist</span>(presentation_dfm)</span></code></pre></div>
<pre><code>## textstat_dist object; method = &quot;euclidean&quot;
##                            00-tidyverse.pdf 01-introduction.pdf
## 00-tidyverse.pdf                          0                 259
## 01-introduction.pdf                     259                   0
## 02-version-control.pdf                  376                 295
## 03-ethics.pdf                           285                 141
## 04-functions-debugging.pdf              285                 237
## 05-databases.pdf                        296                 259
## 06-webdata.pdf                          282                 214
## 09-modeling.pdf                         282                 236
##                            02-version-control.pdf 03-ethics.pdf
## 00-tidyverse.pdf                              376           285
## 01-introduction.pdf                           295           141
## 02-version-control.pdf                          0           319
## 03-ethics.pdf                                 319             0
## 04-functions-debugging.pdf                    358           261
## 05-databases.pdf                              382           291
## 06-webdata.pdf                                348           243
## 09-modeling.pdf                               364           266
##                            04-functions-debugging.pdf 05-databases.pdf
## 00-tidyverse.pdf                                  285              296
## 01-introduction.pdf                               237              259
## 02-version-control.pdf                            358              382
## 03-ethics.pdf                                     261              291
## 04-functions-debugging.pdf                          0              319
## 05-databases.pdf                                  319                0
## 06-webdata.pdf                                    267              299
## 09-modeling.pdf                                   270              288
##                            06-webdata.pdf 09-modeling.pdf
## 00-tidyverse.pdf                      282             282
## 01-introduction.pdf                   214             236
## 02-version-control.pdf                348             364
## 03-ethics.pdf                         243             266
## 04-functions-debugging.pdf            267             270
## 05-databases.pdf                      299             288
## 06-webdata.pdf                          0             270
## 09-modeling.pdf                       270               0</code></pre>
<p>Just for fun: lets make an ever popular word cloud! We can do this
super easily with the textplot_wordcloud() function.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(presentation_dfm, <span class="at">max_words =</span> <span class="dv">50</span>)</span></code></pre></div>
<p><img src="Live_Tutorial_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
</div>
<div id="natural-language-processing-1" class="section level1">
<h1>Natural Language Processing</h1>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
