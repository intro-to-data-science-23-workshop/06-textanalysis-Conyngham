<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Killian, Luca &amp; Aranxa" />


<title>Quanteda</title>

<script src="Live_Tutorial_files/header-attrs-2.24/header-attrs.js"></script>
<script src="Live_Tutorial_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="Live_Tutorial_files/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="Live_Tutorial_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="Live_Tutorial_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="Live_Tutorial_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="Live_Tutorial_files/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="Live_Tutorial_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="Live_Tutorial_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="Live_Tutorial_files/navigation-1.1/tabsets.js"></script>
<link href="Live_Tutorial_files/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="Live_Tutorial_files/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="custom.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">



<h1 class="title toc-ignore">Quanteda</h1>
<h3 class="subtitle">Quantitative Text Analyis</h3>
<h4 class="author">Killian, Luca &amp; Aranxa</h4>

</div>


<div id="welcome" class="section level1">
<h1>Welcome!👋</h1>
<p>This Workshop introduces you to quanteda, an R package for
quantitative text analysis.</p>
</div>
<div id="text-analysis" class="section level1">
<h1>Text Analysis 📚</h1>
<p>Why do we want to analyze textual data? Text is everywhere, grows in
volume and becomes more easily accessible as we speak. Main reasons for
this are the widespread use of social media and the digitalisation of
many aspects of our lives, making lots of data available for (social
science) research. Natural language processing provides us with the
fundamental tools and methods to analyse text data.</p>
<div id="natural-language-processing" class="section level3">
<h3>Natural Language Processing</h3>
<p>Natural Language Processing (NLP) is concerned with enabling
computers/machines to process, understand, interpret and even generate
natural language, for example in the form of text or speech. Some
examples of applications using NLP are chatbots, tools for speech
recognition, automatic text summarization or translation, such as Google
Translate.</p>
</div>
<div id="quantitative-text-analysis" class="section level3">
<h3>Quantitative Text Analysis</h3>
<p>Quantitative text analysis is a subfield of NLP and refers to the
process of analyzing text data using statistical and computational
methods to derive quantitative information from the input text. Some
examples of quantitative text analysis include word frequency analysis,
keyword extraction, sentiment analysis, text visualization, and more.
All of this can be done using the R package quanteda!</p>
</div>
<div id="use-cases" class="section level3">
<h3>Use Cases</h3>
<p>Some popular use cases of quantitative text analysis in social
science research are: - The analysis of political speeches or party
manifestos to identify key phrases - Social Media Listening -
Categorization and quantification of open-ended survey responses. In
order to illustrate the workflow and main functions of the quanteda
package, we analyse speeches by Barack Obama which we previously scraped
from <a href="http://obamaspeeches.com/"
class="uri">http://obamaspeeches.com/</a>.</p>
<p>There’s a great literature regarding discourse analysis of political
speeches. For instance you can check at a very brief example from
Sharififar, M., &amp; Rahimi, E. (2015). Critical discourse analysis of
political speeches: A case study of Obama’s and Rouhani’s speeches at
UN. Theory and Practice in Language studies, 5(2), 343. <a
href="https://www.academypublication.com/issues2/tpls/vol05/02/14.pdf"
class="uri">https://www.academypublication.com/issues2/tpls/vol05/02/14.pdf</a></p>
<p>Our main goal is for you to learn the basic functions that will allow
you to achieve this type of analysis in R!</p>
</div>
</div>
<div id="quanteda" class="section level1">
<h1>Quanteda 💡</h1>
<div id="background" class="section level3">
<h3>Background</h3>
<p>Quanteda is an R packagae for managing and analysing textual data. It
was created by <a href="https://kenbenoit.net">Ken Benoit</a> and is
available via <a
href="https://cran.r-%20project.org/web/packages/quanteda/index.html">CRAN</a>.
The latest update of quanteda is version 4.0 and the package is
maintained by the UK-based non-profit company <a
href="https://quanteda.org">Quanteda Initiative</a>.</p>
<p>Since Version 3.0, quanteda has been split into modular packages.
These consist of:</p>
<p><strong>quanteda:</strong> - Contains all core natural language
processing and textual data management functions</p>
<p><strong>quanteda.textmodels:</strong> - Contains all text models and
supporting functions - Textmodel_* functions</p>
<p><strong>quanteda.textstats:</strong> - Statistics for textual data -
textstat_*() functions</p>
<p><strong>quanteda.textplots:</strong> - Plots for textual data -
textplot_*() functions</p>
<p>Additionally available via GitHub:</p>
<p><strong>quanteda.sentiment:</strong> - Sentiment analysis using
dictionaries</p>
<p><strong>quanteda.tidy:</strong> - Extensions for manipulating
document variables in core quanteda objects using tidyverse
functions</p>
</div>
</div>
<div id="quanteda-basics" class="section level1">
<h1>Quanteda Basics 📝</h1>
<p>The quanteda workflow is structured around three main objects, these
are</p>
<ol style="list-style-type: decimal">
<li>The Corpus</li>
<li>Tokens</li>
<li>The Document-Feature Matrix (dfm)</li>
</ol>
<div id="corpus" class="section level2">
<h2>Corpus</h2>
<p>In quanteda, a corpus functions as the primary data structure for
storing and organizing text data. The corpus stores</p>
<p>The corpus can be thought of as “library” or data frame that holds
the textual data we want to analyse alongside specific document-level or
metadata attributes, called docvars. Only by transforming our input text
into a corpus format, quanteda is able to process it, therefore the
corpus functions as starting point to our analysis.</p>
<p>In general, the corpus functions as relatively static library,
meaning that text data in the corpus should not be changed through
cleaning and preprocessing steps. Rather, texts can be extracted from
the corpus for any manipulation and should be assigned to new objects.
This way, the corpus functions as a copy of the original input data.
Within the corpus, each document is typically represented as a separate
element. Documents within a corpus can be accessed by their index or via
docvars.</p>
</div>
<div id="tokens" class="section level2">
<h2>Tokens</h2>
<p>In quanteda, tokens represent the basic units of text data, that are
used for any further analysis. They comprise usually of words that have
been extracted and grouped as semantic units. Nonetheless, phrases or
even entire sentences can be tokenized as well.</p>
<p>Tokenizing describes the process of splitting the input text into
individual tokens. Once a text is tokenized, various operations for
preprocessing, cleaning and feature extraction can be performed on those
tokens.</p>
<p><strong>How do tokens relate to the Corpus?</strong> When you
tokenize text, you create a list of tokens for each document, and each
document in the corpus is represented as a sequence of tokens. Thereby,
tokens can be used for positional (string-of-words) analysis, which is
used to examine, eg.: the position and relation of tokens within a
corpus.</p>
</div>
<div id="document-feature-matrix" class="section level2">
<h2>Document Feature Matrix</h2>
<p>The document feature matrix puts documents into matrix format and
constitutes the unit on which analyses will be performed. In the DFM,
each row corresponds to a document and each column corresponds to a
feature of that text, which are often tokens. The matrix stores the
frequency of each feature (column) within each document (row). DFMs are
particularly useful if not all parts of the documents in the corpus
should be included in the analysis.Generally, DFMs are often sparse,
meaning that many entries in the matrix are zero, making the DFM more
memory- and computationally efficient.</p>
<p><strong>How does the DFM relate to tokens?</strong> When you create
DFM, the list of tokens is transformed into a structure matrix that
functions as foundation for subsequent analysis. Tokens constitute
individual elements of text data, while a DFM constitutes a structural
and numerical representation of text data. As opposed to tokens, the DFM
does not store information on the position of words within a given
document. A DFM is therefore used to perform non-positional
(bag-of-words) analysis, for example word frequency analysis,sentiment
analysis, text classification, and more.</p>
</div>
</div>
<div id="why-quanteda" class="section level1">
<h1>Why quanteda? ✅</h1>
<p>There are several advantages to using quanteda for quantitative text
analysis!</p>
<ul>
<li>Quanteda is compatible with other R packages, for example the
magrittr |&gt; and most of the grammar of the tidyverse!</li>
<li>Quanteda is a well maintained package: The quanteda initiative
offers user, technical and development support as well as teaching and
workshop opportunities</li>
<li>It is a relatively easy to use for beginners but offers complex
functions for more advanced analyses too</li>
<li>And it is fast: Compared to other R and Python package for
processinf large textual data, quanteda is faster and more
efficient</li>
</ul>
<p>…And now it’s time to try it yourself!</p>
<table>
<tbody>
<tr class="odd">
<td># Workflow 💪</td>
</tr>
</tbody>
</table>
</div>
<div id="loading-the-package" class="section level1">
<h1>Loading the package</h1>
<p>First we load the core of the quanteda package.</p>
<p>If any of the packages are not installed on your machine you can
uncomment the first line.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">#install.packages(&#39;quanteda&#39;,&#39;quanteda.textstats&#39;,&#39;readtext&#39;,&#39;gt&#39;)</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span></code></pre></div>
<pre><code>## Package version: 3.3.1
## Unicode version: 13.0
## ICU version: 69.1</code></pre>
<pre><code>## Parallel computing: 8 of 8 threads used.</code></pre>
<pre><code>## See https://quanteda.io for tutorials and examples.</code></pre>
<p>As mentioned above, the quanteda package is split in to modular
packages so we also download a selection of those of interest to us in
this tutorial.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">library</span>(quanteda.textstats)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span></code></pre></div>
<p>We also load readtext which makes the process of importing texts
easier, and also imports meta data. Specifically in our case, it allows
us to read in pdfs as text files. Other compatible input formats include
.txt, .csv, .tab, .json, .doc and .docx files.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">library</span>(readtext)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;readtext&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:quanteda&#39;:
## 
##     texts</code></pre>
<p>Finally we load dplyr for our workflow and gt for creating nice
looking tables.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code></pre></div>
</div>
<div id="loading-and-prepping-our-data---the-corpus"
class="section level1">
<h1>Loading and prepping our data - The Corpus</h1>
<p>For the example in this tutorial we will load in a collection of
slides from the Intro to Data Science Course by Simon Munzert. We use
the readtext function as mentioned above.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>ids_presentations_df <span class="ot">=</span> <span class="fu">readtext</span>(<span class="st">&quot;./Slideshows/*.pdf&quot;</span>, <span class="at">docvarsfrom =</span> <span class="st">&quot;filenames&quot;</span>)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="co">#rt_pdf = readtext(&quot;./Slideshows/*.pdf&quot;, docvarsfrom = &quot;filenames&quot;, dvsep = &quot;-&quot;)</span></span></code></pre></div>
<div id="adding-your-own-slideshow" class="section level2">
<h2>Adding your own slideshow</h2>
<p>We encourage you to add your own slideshow in pdf format. To do this,
just insert the pdf file in the Input folder and delete any other
contents. For demonstration purposes we have included the slideshow you
just one, but we think that this demonstration will be more interesting
and fun if you can add your own data.</p>
<p>We will then add the text and info on the presentation such as it’s
title to our presentations data frame. This is straightforward as
readtext will give us the same variable names for both imports. We also
add an indicator variable which tells us which presentation is the
‘extra’ one we added. This will be important later for some of the
analysis we want to do.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>your_presentation_df <span class="ot">=</span> <span class="fu">readtext</span>(<span class="st">&quot;./Import/*.pdf&quot;</span>, <span class="at">docvarsfrom =</span> <span class="st">&quot;filenames&quot;</span>)</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">nrow</span>(your_presentation_df) <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="fu">stop</span>(<span class="st">&quot;More than one pdf in Import folder, please remove extras&quot;</span>) </span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>your_presentation_df<span class="sc">$</span>yourpresentation <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">TRUE</span>)</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>ids_presentations_df<span class="sc">$</span>yourpresentation <span class="ot">=</span> <span class="fu">rep</span>(<span class="cn">FALSE</span>,<span class="at">rep=</span><span class="fu">nrow</span>(ids_presentations_df))</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="co">#These two lines create the variable your presentation and set it to true only for the presentation imported from the Import folder</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>yourpresentationname <span class="ot">=</span> <span class="fu">as.character</span>(<span class="fu">as.data.frame</span>(your_presentation_df)[[<span class="dv">1</span>]])</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="co">#this line saves the name of your specific presentation for later use</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a>presentations_df <span class="ot">=</span> <span class="fu">rbind</span>(ids_presentations_df, your_presentation_df)</span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="fu">print</span>(presentations_df, <span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## readtext object consisting of 8 documents and 2 docvars.
## # A data frame: 8 × 4
##   doc_id                     text                docvar1        yourpresentation
##   &lt;chr&gt;                      &lt;chr&gt;               &lt;chr&gt;          &lt;lgl&gt;           
## 1 00-tidyverse.pdf           &quot;\&quot;Introducti\&quot;...&quot; 00-tidyverse   FALSE           
## 2 01-introduction.pdf        &quot;\&quot;Introducti\&quot;...&quot; 01-introducti… FALSE           
## 3 02-version-control.pdf     &quot;\&quot;Introducti\&quot;...&quot; 02-version-co… FALSE           
## 4 03-ethics.pdf              &quot;\&quot;Introducti\&quot;...&quot; 03-ethics      FALSE           
## 5 04-functions-debugging.pdf &quot;\&quot;Introducti\&quot;...&quot; 04-functions-… FALSE           
## 6 05-databases.pdf           &quot;\&quot;Introducti\&quot;...&quot; 05-databases   FALSE           
## 7 06-webdata.pdf             &quot;\&quot;Introducti\&quot;...&quot; 06-webdata     FALSE           
## 8 09-modeling.pdf            &quot;\&quot;Introducti\&quot;...&quot; 09-modeling    TRUE</code></pre>
<p>Here we can see the structure of our dataframe. Luckily for us,
readtext automatically formats the dataframe as quantedata expects them,
but for future reference if you are constructing your own dataframes for
analysis, the text for analysis for each row (which will be each unique
text, presentation, section or any other unit of analysis) must be in a
column called ‘text’.</p>
</div>
<div id="creating-a-corpus" class="section level2">
<h2>Creating a Corpus</h2>
<p>We can now create our first Corpus - this is the object at the centre
of the quanteda package.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>presentations_corpus <span class="ot">=</span> <span class="fu">corpus</span>(presentations_df)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="fu">summary</span>(presentations_corpus)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Text"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Types"],"name":[2],"type":["int"],"align":["right"]},{"label":["Tokens"],"name":[3],"type":["int"],"align":["right"]},{"label":["Sentences"],"name":[4],"type":["int"],"align":["right"]},{"label":["docvar1"],"name":[5],"type":["chr"],"align":["left"]},{"label":["yourpresentation"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"00-tidyverse.pdf","2":"1679","3":"10305","4":"264","5":"00-tidyverse","6":"FALSE","_rn_":"1"},{"1":"01-introduction.pdf","2":"825","3":"2907","4":"121","5":"01-introduction","6":"FALSE","_rn_":"2"},{"1":"02-version-control.pdf","2":"1554","3":"10083","4":"616","5":"02-version-control","6":"FALSE","_rn_":"3"},{"1":"03-ethics.pdf","2":"850","3":"3874","4":"231","5":"03-ethics","6":"FALSE","_rn_":"4"},{"1":"04-functions-debugging.pdf","2":"1238","3":"7361","4":"279","5":"04-functions-debugging","6":"FALSE","_rn_":"5"},{"1":"05-databases.pdf","2":"1694","3":"10029","4":"389","5":"05-databases","6":"FALSE","_rn_":"6"},{"1":"06-webdata.pdf","2":"1462","3":"8439","4":"306","5":"06-webdata","6":"FALSE","_rn_":"7"},{"1":"09-modeling.pdf","2":"1685","3":"9406","4":"246","5":"09-modeling","6":"TRUE","_rn_":"8"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Here we see the corpus structure with some information about the text
in each slideshow, plus the document-level variables we added
earlier.</p>
</div>
</div>
<div
id="preparing-our-texts-for-non-relational-analysis---tokens-and-the-dfm"
class="section level1">
<h1>Preparing our texts for non-relational analysis - Tokens and the
DFM</h1>
<p>Now that we have our corpus we can begin to analyse the text data.
For this section we will focus on non-relational analysis, i.e. we will
look at the presence and frequency of words in each slideshow,
regardless of their context. The first process our data will undergo is
tokenization. This splits up the text of each document into tokens,
which are usually words, but can be other standalone character
units.</p>
<p>Once we have tokenized our corpus we can create a Document feature
matrix as introduced above. We introduce these concepts these concepts
together as that is how you will usually emply the min the wild. But
there are also some use cases where you might stop after
tokenization.</p>
<p>Finally, we run the function top features, to have a look at the most
common tokens in the entire corpus. This is our first analysis function,
just to get an overview, but we will dive into more later.</p>
<p>Don’t worry if this process of tokenization and constructing a dfm
still feels unclear, we will go over it a few times, and you’ll have a
chance to adjust the process yourselves.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>presentation_tokens <span class="ot">=</span> <span class="fu">tokens</span>(presentations_corpus)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>presentation_dfm <span class="ot">=</span> <span class="fu">dfm</span>(presentation_tokens)</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="fu">print</span>(presentation_dfm)</span></code></pre></div>
<pre><code>## Document-feature matrix of: 8 documents, 5,292 features (76.49% sparse) and 2 docvars.
##                             features
## docs                         introduction  to data science session 0   :   r
##   00-tidyverse.pdf                      1  99   48       6       4 5 194 119
##   01-introduction.pdf                   2  43   64      34       6 0  42  19
##   02-version-control.pdf                1 239   31      11       5 1 122  17
##   03-ethics.pdf                         1  60   32      15       1 0  65   0
##   04-functions-debugging.pdf            1 152   22       7       1 2 118  94
##   05-databases.pdf                      2 183  132       2       2 0 157  71
##                             features
## docs                         and the
##   00-tidyverse.pdf            65 143
##   01-introduction.pdf         54  97
##   02-version-control.pdf     132 342
##   03-ethics.pdf               83 117
##   04-functions-debugging.pdf  64 198
##   05-databases.pdf            99 284
## [ reached max_ndoc ... 2 more documents, reached max_nfeat ... 5,282 more features ]</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">topfeatures</span>(presentation_dfm)</span></code></pre></div>
<pre><code>##    .    ,    )    (  the    &quot;    #    &gt;    :   to 
## 2962 2343 1672 1658 1626 1408 1207 1160 1060 1016</code></pre>
<p>There we have it, our first DFM! Not so difficult to begin with.</p>
<p>Looking at the top features, we can see that all the most common
tokens by far are punctuation or filler words which don’t carry much
meaning. This is normal, and luckily quantedata comes built-in with some
handy functions and options to help alleviate this.</p>
<div id="cleaning-our-tokens" class="section level2">
<h2>Cleaning our Tokens</h2>
<p>The first thing we can do is adjust the parameters on the function
tokens(), allowing us to remove punctuation, numbers and symbols.</p>
<p>An even more powerful tool is the token_remove function combined with
the built-in stopwords database. Quantedata comes loaded with common
filler words or stop words for _ different languages. Removing these may
help us with our analysis.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>presentation_tokens <span class="ot">=</span> <span class="fu">tokens</span>(presentations_corpus, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>, <span class="at">remove_numbers =</span> <span class="cn">TRUE</span>, <span class="at">remove_symbols =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>presentation_tokens <span class="ot">=</span> <span class="fu">tokens_remove</span>(presentation_tokens, <span class="fu">stopwords</span>(<span class="st">&quot;en&quot;</span>))</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>presentation_dfm <span class="ot">=</span> <span class="fu">dfm</span>(presentation_tokens)</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="fu">topfeatures</span>(presentation_dfm)</span></code></pre></div>
<pre><code>##        r     data      can function      chr      git    model      use 
##      526      438      175      174      160      154      138      124 
##   github database 
##      108      104</code></pre>
<p>Now this looks more promising!</p>
<div id="bringing-it-all-together" class="section level3">
<h3>Bringing it all together</h3>
<p>You can use your own discretion to decide what exactly should be kept
or excluded from your tokens. For example, I felt that ‘can’ and ‘use’
were not words that carried much useful meaning, especially with their
very high frequency in the data, so I choose to remove the mbelow. Have
a look at the outputs above and see if there are any adjustments you
would make for our final tokenisation process, then apply them
below.</p>
<p>We have included some functions for you already here and there are
even more in the section entitled: More Token Cleaunup, whcih you can
add to the pipeline.</p>
<p>(We repeat the whole process here for the sake of having it all in
once place as an overview)</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>presentation_tokens <span class="ot">=</span> <span class="fu">tokens</span>(presentations_corpus, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>, <span class="at">remove_numbers =</span> <span class="cn">TRUE</span>, <span class="at">remove_symbols =</span> <span class="cn">TRUE</span>,<span class="at">remove_url =</span> <span class="cn">TRUE</span>, <span class="at">remove_separators =</span> <span class="cn">TRUE</span>, <span class="at">split_hyphens =</span> <span class="cn">FALSE</span>, <span class="at">split_tags =</span> <span class="cn">FALSE</span>)<span class="co">#Do you think we should be excluding all these categories? Feel free to change these options as you feel makes the most sense</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>presentation_dfm <span class="ot">=</span> presentation_tokens <span class="sc">%&gt;%</span> </span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="at">pattern=</span> <span class="fu">stopwords</span>(<span class="st">&quot;en&quot;</span>)) <span class="sc">%&gt;%</span> <span class="co">#removing the stopwords as before</span></span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="at">pattern =</span> <span class="fu">c</span>(<span class="st">&#39;can&#39;</span>,<span class="st">&#39;use&#39;</span>)) <span class="sc">%&gt;%</span> <span class="co">#Removing can and use as mentioned, you can add any &#39;filler&#39; words which you would like excluded from the analysis here.</span></span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a>  <span class="co">#Some more functions you may want to consider for cleaning your tokens (uncomment first line for each to use and remember to include pipe symbol at the end):</span></span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a>  <span class="co">#tokens_tolower() %&gt;%</span></span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a>  <span class="co">#Changes all tokens to be lower case</span></span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a>  <span class="co">#tokens_toupper() %&gt;%</span></span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a>  <span class="co">#Changes all tokens to be upper case</span></span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a>  <span class="co">#tokens_replace(pattern = c(&#39;color&#39;), replacement = (&#39;colour&#39;)) %&gt;%</span></span>
<span id="cb24-12"><a href="#cb24-12" tabindex="-1"></a>  <span class="co">#Allows you to find and replace words in your tokens, remember that pattern and replacement should always be the same length and that entries are matched pairwise.</span></span>
<span id="cb24-13"><a href="#cb24-13" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="co">#Finally we run the dfm function on our finished and cleaned tokens.</span></span>
<span id="cb24-14"><a href="#cb24-14" tabindex="-1"></a></span>
<span id="cb24-15"><a href="#cb24-15" tabindex="-1"></a><span class="fu">topfeatures</span>(presentation_dfm)</span></code></pre></div>
<pre><code>##        r     data function      chr      git    model   github database 
##      526      438      174      160      154      138      108      104 
##      one     repo 
##      102      101</code></pre>
<p>Now we have a nice looking Document Feature matrix for our further
analysis. For our live presentation we will stop here and move on to the
next section: Analysing text non-relationally, but if you would like to
learn some more about creating and tweaking corpuses continue below.</p>
</div>
</div>
<div id="additional-functions-for-corpuses" class="section level2">
<h2>Additional Functions for Corpuses</h2>
<p>Subset corpora: <code>{r}corpus_subset()</code>
<code>{r}corpus_subset(x, Year &gt; 1990)</code></p>
<p>Change units of a corpus: <code>{r}corpus_reshape()</code>
<code>{r}corpus_reshape(x, to = c("sentences", "paragraphs"))</code></p>
<p>Segment texts on a pattern match: <code>{r}corpus_segment()</code>
<code>{r}corpus_segment(x, pattern, valuetype, extract_pattern = TRUE)</code></p>
<p>Take a random sample of the corpus texts:
<code>{r}corpus_sample</code>
<code>{r}corpus_sample(x, size = 10, replace = FALSE)</code></p>
</div>
<div id="additional-funtions-for-tokens" class="section level2">
<h2>Additional Funtions for Tokens</h2>
<div id="more-cleaning" class="section level3">
<h3>More Cleaning</h3>
<p>tokens_keep() - For when we only want to keep tokens matching a
certain criteria.</p>
<p>Tokens_select() - The function underlying tokens_keep and
tokens_remove. Use the selections = ‘keep’ or ‘remove’ parameter to pick
what you want to do with the matched tokens.</p>
<p>Tokens_wordstem() - This is a really interesting and useful function
that reduces all words and tokens to their root. We use a very simple
sentence below to show an example of this in action.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="fu">tokens_wordstem</span>(<span class="fu">tokens</span>(<span class="st">&#39;She runs, he can run, they are running&#39;</span>))</span></code></pre></div>
<pre><code>## Tokens consisting of 1 document.
## text1 :
##  [1] &quot;She&quot;  &quot;run&quot;  &quot;,&quot;    &quot;he&quot;   &quot;can&quot;  &quot;run&quot;  &quot;,&quot;    &quot;they&quot; &quot;are&quot;  &quot;run&quot;</code></pre>
<p><code>{r}Tokens_compound()</code></p>
</div>
<div id="other-token-functions-from-lucas-list-still-need-doing."
class="section level3">
<h3>Other Token functions (From Luca’s list, still need doing.)</h3>
<p><code>{r}Tokens_lookup()</code></p>
<p><code>{r}Tokens_ngrams()</code></p>
<p><code>{r}Tokens_skipgrams()</code></p>
<p><code>{r}Tokens_sample()</code></p>
<p><code>{r}Tokens_subset()</code></p>
</div>
<div id="more-document-feature-matrix-functions" class="section level3">
<h3>More document Feature Matrix functions</h3>
<p><code>dictionary()</code></p>
<p><code>dfm_lookup()</code></p>
<p><code>dfm_select()</code></p>
<p><code>dfm_compress()</code></p>
<p><code>dfm_sample()</code></p>
<p><code>dfm_weight()</code></p>
<p><code>dfm_sort()</code></p>
</div>
</div>
</div>
<div id="analysing-our-texts-non-relationally" class="section level1">
<h1>Analysing our texts non-relationally</h1>
<p>There are many many functions across the quantedata family of
packages which can be used to analyse our newly created DFM, here we
will focus on some of the fucntions we foudn the most interesting from
the textstat and testplot packages.</p>
<div id="lexical-diversity" class="section level2">
<h2>Lexical Diversity</h2>
<p>The first function we look at is textstat_lexdiv(), which calculates
the lexical diverstiy of the text. As a default this is the ratio of
unique tokens to total tokens in the text (TTR), but you can also use
the (measure = ) parameter to change to measure.</p>
<p>Also important to note here that while the output of most functions
in textstat look like data frames, they are initially stored as lists,
of specific type depending on the funciton. We use as.list(), or
as.data.frame() to tranform them into more useable data types as seen
below.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">textstat_lexdiv</span>(presentation_dfm))</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="fu">as.data.frame</span>(<span class="fu">textstat_lexdiv</span>(presentation_dfm)) <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(TTR)) <span class="sc">%&gt;%</span> <span class="fu">gt</span>() <span class="co">#ordering our results in terms of TTR and presenting them in a nice table</span></span></code></pre></div>
<div id="ikrsrlsqkb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ikrsrlsqkb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ikrsrlsqkb thead, #ikrsrlsqkb tbody, #ikrsrlsqkb tfoot, #ikrsrlsqkb tr, #ikrsrlsqkb td, #ikrsrlsqkb th {
  border-style: none;
}

#ikrsrlsqkb p {
  margin: 0;
  padding: 0;
}

#ikrsrlsqkb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ikrsrlsqkb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ikrsrlsqkb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ikrsrlsqkb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ikrsrlsqkb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ikrsrlsqkb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ikrsrlsqkb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ikrsrlsqkb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ikrsrlsqkb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ikrsrlsqkb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ikrsrlsqkb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ikrsrlsqkb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ikrsrlsqkb .gt_spanner_row {
  border-bottom-style: hidden;
}

#ikrsrlsqkb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ikrsrlsqkb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ikrsrlsqkb .gt_from_md > :first-child {
  margin-top: 0;
}

#ikrsrlsqkb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ikrsrlsqkb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ikrsrlsqkb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ikrsrlsqkb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ikrsrlsqkb .gt_row_group_first td {
  border-top-width: 2px;
}

#ikrsrlsqkb .gt_row_group_first th {
  border-top-width: 2px;
}

#ikrsrlsqkb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ikrsrlsqkb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ikrsrlsqkb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ikrsrlsqkb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ikrsrlsqkb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ikrsrlsqkb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ikrsrlsqkb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ikrsrlsqkb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ikrsrlsqkb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ikrsrlsqkb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ikrsrlsqkb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ikrsrlsqkb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ikrsrlsqkb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ikrsrlsqkb .gt_left {
  text-align: left;
}

#ikrsrlsqkb .gt_center {
  text-align: center;
}

#ikrsrlsqkb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ikrsrlsqkb .gt_font_normal {
  font-weight: normal;
}

#ikrsrlsqkb .gt_font_bold {
  font-weight: bold;
}

#ikrsrlsqkb .gt_font_italic {
  font-style: italic;
}

#ikrsrlsqkb .gt_super {
  font-size: 65%;
}

#ikrsrlsqkb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ikrsrlsqkb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ikrsrlsqkb .gt_indent_1 {
  text-indent: 5px;
}

#ikrsrlsqkb .gt_indent_2 {
  text-indent: 10px;
}

#ikrsrlsqkb .gt_indent_3 {
  text-indent: 15px;
}

#ikrsrlsqkb .gt_indent_4 {
  text-indent: 20px;
}

#ikrsrlsqkb .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="document">document</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="TTR">TTR</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="document" class="gt_row gt_left">01-introduction.pdf</td>
<td headers="TTR" class="gt_row gt_right">0.4357585</td></tr>
    <tr><td headers="document" class="gt_row gt_left">03-ethics.pdf</td>
<td headers="TTR" class="gt_row gt_right">0.3416621</td></tr>
    <tr><td headers="document" class="gt_row gt_left">06-webdata.pdf</td>
<td headers="TTR" class="gt_row gt_right">0.3248526</td></tr>
    <tr><td headers="document" class="gt_row gt_left">04-functions-debugging.pdf</td>
<td headers="TTR" class="gt_row gt_right">0.3227191</td></tr>
    <tr><td headers="document" class="gt_row gt_left">09-modeling.pdf</td>
<td headers="TTR" class="gt_row gt_right">0.3086221</td></tr>
    <tr><td headers="document" class="gt_row gt_left">00-tidyverse.pdf</td>
<td headers="TTR" class="gt_row gt_right">0.3048969</td></tr>
    <tr><td headers="document" class="gt_row gt_left">05-databases.pdf</td>
<td headers="TTR" class="gt_row gt_right">0.2829484</td></tr>
    <tr><td headers="document" class="gt_row gt_left">02-version-control.pdf</td>
<td headers="TTR" class="gt_row gt_right">0.2551834</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<div id="distance-and-similarity" class="section level2">
<h2>Distance and Similarity</h2>
<p>Another interesting function for looking at the distance between two
text documents is textstat_dist(), which can calculate the distance
between two documents, which can most easily be understood as how
different the choice and frequency of words used is between the
documents.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="fu">as.data.frame</span>(<span class="fu">textstat_dist</span>(presentation_dfm)) <span class="sc">%&gt;%</span> <span class="co">#Here we run the function, with the default, euclidean distance measurement.</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>  </span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>  <span class="fu">filter</span>(document2 <span class="sc">==</span> yourpresentationname) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(euclidean) <span class="sc">%&gt;%</span> <span class="fu">select</span> (<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)) <span class="sc">%&gt;%</span> <span class="fu">gt</span>() <span class="co">#Here we use dplyr to filter for only the distances relative to your presentation, arrange in ascending order of distance and filter out the column of your presentation name repeated and gt to give us a nice readable table</span></span></code></pre></div>
<div id="cacvhpgfvp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#cacvhpgfvp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#cacvhpgfvp thead, #cacvhpgfvp tbody, #cacvhpgfvp tfoot, #cacvhpgfvp tr, #cacvhpgfvp td, #cacvhpgfvp th {
  border-style: none;
}

#cacvhpgfvp p {
  margin: 0;
  padding: 0;
}

#cacvhpgfvp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#cacvhpgfvp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#cacvhpgfvp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#cacvhpgfvp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#cacvhpgfvp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cacvhpgfvp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cacvhpgfvp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cacvhpgfvp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#cacvhpgfvp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#cacvhpgfvp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#cacvhpgfvp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#cacvhpgfvp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#cacvhpgfvp .gt_spanner_row {
  border-bottom-style: hidden;
}

#cacvhpgfvp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#cacvhpgfvp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#cacvhpgfvp .gt_from_md > :first-child {
  margin-top: 0;
}

#cacvhpgfvp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#cacvhpgfvp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#cacvhpgfvp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#cacvhpgfvp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#cacvhpgfvp .gt_row_group_first td {
  border-top-width: 2px;
}

#cacvhpgfvp .gt_row_group_first th {
  border-top-width: 2px;
}

#cacvhpgfvp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cacvhpgfvp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#cacvhpgfvp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#cacvhpgfvp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cacvhpgfvp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cacvhpgfvp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#cacvhpgfvp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#cacvhpgfvp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#cacvhpgfvp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cacvhpgfvp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cacvhpgfvp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cacvhpgfvp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cacvhpgfvp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cacvhpgfvp .gt_left {
  text-align: left;
}

#cacvhpgfvp .gt_center {
  text-align: center;
}

#cacvhpgfvp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#cacvhpgfvp .gt_font_normal {
  font-weight: normal;
}

#cacvhpgfvp .gt_font_bold {
  font-weight: bold;
}

#cacvhpgfvp .gt_font_italic {
  font-style: italic;
}

#cacvhpgfvp .gt_super {
  font-size: 65%;
}

#cacvhpgfvp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#cacvhpgfvp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#cacvhpgfvp .gt_indent_1 {
  text-indent: 5px;
}

#cacvhpgfvp .gt_indent_2 {
  text-indent: 10px;
}

#cacvhpgfvp .gt_indent_3 {
  text-indent: 15px;
}

#cacvhpgfvp .gt_indent_4 {
  text-indent: 20px;
}

#cacvhpgfvp .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="document1">document1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="euclidean">euclidean</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="document1" class="gt_row gt_center">01-introduction.pdf</td>
<td headers="euclidean" class="gt_row gt_right">235.5101</td></tr>
    <tr><td headers="document1" class="gt_row gt_center">03-ethics.pdf</td>
<td headers="euclidean" class="gt_row gt_right">266.1240</td></tr>
    <tr><td headers="document1" class="gt_row gt_center">06-webdata.pdf</td>
<td headers="euclidean" class="gt_row gt_right">270.2147</td></tr>
    <tr><td headers="document1" class="gt_row gt_center">04-functions-debugging.pdf</td>
<td headers="euclidean" class="gt_row gt_right">270.3738</td></tr>
    <tr><td headers="document1" class="gt_row gt_center">00-tidyverse.pdf</td>
<td headers="euclidean" class="gt_row gt_right">282.0691</td></tr>
    <tr><td headers="document1" class="gt_row gt_center">05-databases.pdf</td>
<td headers="euclidean" class="gt_row gt_right">287.8819</td></tr>
    <tr><td headers="document1" class="gt_row gt_center">02-version-control.pdf</td>
<td headers="euclidean" class="gt_row gt_right">364.3268</td></tr>
  </tbody>
  
  
</table>
</div>
<p>Which IDS slideshow is your presentation most like?</p>
<p>Another similar function is textstat_simil() which calculates
similarities, and defaults to the correlation in two documents. See if
you can make a similar function to the one above and see how well the
results match.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="co">#Insert your code here:</span></span></code></pre></div>
</div>
<div id="grouping-dfms" class="section level2">
<h2>Grouping DFMs</h2>
<p>Above, we filtered out all comparisons not involving your
presentation manually, but because our document-level variables have
been retained in our DFM, we can actually group the presentation by the
variable ‘yourpresentation’ we created earlier. (Remember, this variable
is true for the presentation you inputted and false for all others.)</p>
<p>One way of doing this is the dfm_group() function, which is useful as
part of a pipe, to pass the group DFMs based on a parameter of interest
into the next function.</p>
<p>Some functions in the package have funcitonality for this built in,
as we can see with topfeatures below.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="fu">dfm_group</span>(presentation_dfm, presentation_dfm<span class="sc">$</span>yourpresentation)</span></code></pre></div>
<pre><code>## Document-feature matrix of: 2 documents, 4,485 features (42.75% sparse) and 1 docvar.
##        features
## docs    introduction data science session   r tidyverse simon munzert hertie
##   FALSE            9  370      79      21 421        65    17      17     18
##   TRUE             2   68       6       2 105         1     1       2      1
##        features
## docs    school
##   FALSE     13
##   TRUE       1
## [ reached max_nfeat ... 4,475 more features ]</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="fu">topfeatures</span>(presentation_dfm, <span class="at">groups =</span> yourpresentation)</span></code></pre></div>
<pre><code>## $`FALSE`
##        r     data      git function      chr   github database     repo 
##      421      370      154      153      143      108      104      101 
##  changes     code 
##       87       86 
## 
## $`TRUE`
##        model            r         data       models     distance      formula 
##          108          105           68           68           42           34 
## coefficients          dbl    model_out           lm 
##           30           29           27           26</code></pre>
<p>While this is just a toy example as our documents don’t have many
document level variables, there are many useful applications of this in
analysing texts, like grouping by chapter in a book, by which party gave
a political speech, or any other category of interest in our
documents.</p>
</div>
<div id="word-clouds" class="section level2">
<h2>Word Clouds</h2>
<p>Just for fun: lets make an ever popular word cloud! We can do this
super easily with the textplot_wordcloud() function.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(presentation_dfm, <span class="at">max_words =</span> <span class="dv">50</span>)</span></code></pre></div>
<p><img src="Live_Tutorial_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="co">#dfm_group(presentation_dfm, presentation_dfm$yourpresentation) %&gt;% textplot_wordcloud( max_words = 20, comparison = TRUE) - Can&#39;t get working yet - Killian</span></span></code></pre></div>
</div>
</div>
<div id="webscraping-example" class="section level1">
<h1>Webscraping example</h1>
<div id="try-it-out-comparing-political-discourses"
class="section level2">
<h2>Try it out! Comparing political discourses</h2>
<p>Now we’re going to give you an example where you can apply this for
one of the most used cases: analyzing political discourses.</p>
<p><strong>Step 1</strong>. Scraping a discourse To practice you can use
the <a href="http://obamaspeeches.com"
class="uri">http://obamaspeeches.com</a> website to explore on his best*
speeches(according to the webpage creators). Let’s try with his
inaugural speech.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="co">#Save the link as object</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a>obama_speeches <span class="ot">&lt;-</span> <span class="st">&quot;http://obamaspeeches.com/P-Obama-Inaugural-Speech-Inauguration.htm&quot;</span></span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a>obama_inaugural <span class="ot">&lt;-</span> <span class="fu">read_html</span>(obama_speeches)</span></code></pre></div>
<p>With Selector Gadget we identify the structure in the html containing
the text. (Copy it direct from the bar, do not click on the xpath
function.)</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a>inaugural_speech_container <span class="ot">&lt;-</span> obama_inaugural <span class="sc">|&gt;</span>  <span class="fu">html_nodes</span>(<span class="st">&quot;br+ table font+ font&quot;</span>)</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a><span class="co"># Extract the text from the container</span></span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a>inaugural_speech_text <span class="ot">&lt;-</span> <span class="fu">html_text</span>(inaugural_speech_container)</span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" tabindex="-1"></a><span class="co"># Print the speech text</span></span>
<span id="cb40-7"><a href="#cb40-7" tabindex="-1"></a><span class="fu">cat</span>(inaugural_speech_text, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## 
##             My fellow citizens:
##             I stand here today humbled by the task before us, grateful for the 
##             trust you have bestowed, mindful of the sacrifices borne by our ancestors. 
##             I thank President Bush for his service to our nation, as well as the 
##             generosity and cooperation he has shown throughout this transition.
##             Forty-four Americans have now taken the presidential oath. The words 
##             have been spoken during rising tides of prosperity and the still waters 
##             of peace. Yet, every so often the oath is taken amidst gathering clouds 
##             and raging storms. At these moments, America has carried on not simply 
##             because of the skill or vision of those in high office, but because 
##             We the People have remained faithful to the ideals of our forbearers, 
##             and true to our founding documents.
##             So it has been. So it must be with this generation of Americans.
##             That we are in the midst of crisis is now well understood. Our nation 
##             is at war, against a far-reaching network of violence and hatred. 
##             Our economy is badly weakened, a consequence of greed and irresponsibility 
##             on the part of some, but also our collective failure to make hard 
##             choices and prepare the nation for a new age. Homes have been lost; 
##             jobs shed; businesses shuttered. Our health care is too costly; our 
##             schools fail too many; and each day brings further evidence that the 
##             ways we use energy strengthen our adversaries and threaten our planet.
##             These are the indicators of crisis, subject to data and statistics. 
##             Less measurable but no less profound is a sapping of confidence across 
##             our land - a nagging fear that America&#39;s decline is inevitable, and 
##             that the next generation must lower its sights.
##             Today I say to you that the challenges we face are real. They are 
##             serious and they are many. They will not be met easily or in a short 
##             span of time. But know this, America - they will be met.
##             On this day, we gather because we have chosen hope over fear, unity 
##             of purpose over conflict and discord.
##             On this day, we come to proclaim an end to the petty grievances and 
##             false promises, the recriminations and worn out dogmas, that for far 
##             too long have strangled our politics.
##             We remain a young nation, but in the words of Scripture, the time 
##             has come to set aside childish things. The time has come to reaffirm 
##             our enduring spirit; to choose our better history; to carry forward 
##             that precious gift, that noble idea, passed on from generation to 
##             generation: the God-given promise that all are equal, all are free, 
##             and all deserve a chance to pursue their full measure of happiness.
##             In reaffirming the greatness of our nation, we understand that greatness 
##             is never a given. It must be earned. Our journey has never been one 
##             of short-cuts or settling for less. It has not been the path for the 
##             faint-hearted - for those who prefer leisure over work, or seek only 
##             the pleasures of riches and fame. Rather, it has been the risk-takers, 
##             the doers, the makers of things - some celebrated but more often men 
##             and women obscure in their labor, who have carried us up the long, 
##             rugged path towards prosperity and freedom.
##             For us, they packed up their few worldly possessions and traveled 
##             across oceans in search of a new life.
##             For us, they toiled in sweatshops and settled the West; endured the 
##             lash of the whip and plowed the hard earth.
##             For us, they fought and died, in places like Concord and Gettysburg; 
##             Normandy and Khe Sahn.
##             Time and again these men and women struggled and sacrificed and worked 
##             till their hands were raw so that we might live a better life. They 
##             saw America as bigger than the sum of our individual ambitions; greater 
##             than all the differences of birth or wealth or faction.
##             This is the journey we continue today. We remain the most prosperous, 
##             powerful nation on Earth. Our workers are no less productive than 
##             when this crisis began. Our minds are no less inventive, our goods 
##             and services no less needed than they were last week or last month 
##             or last year. Our capacity remains undiminished. But our time of standing 
##             pat, of protecting narrow interests and putting off unpleasant decisions 
##             - that time has surely passed. Starting today, we must pick ourselves 
##             up, dust ourselves off, and begin again the work of remaking America.
##             For everywhere we look, there is work to be done. The state of the 
##             economy calls for action, bold and swift, and we will act - not only 
##             to create new jobs, but to lay a new foundation for growth. We will 
##             build the roads and bridges, the electric grids and digital lines 
##             that feed our commerce and bind us together. We will restore science 
##             to its rightful place, and wield technology&#39;s wonders to raise health 
##             care&#39;s quality and lower its cost. We will harness the sun and the 
##             winds and the soil to fuel our cars and run our factories. And we 
##             will transform our schools and colleges and universities to meet the 
##             demands of a new age. All this we can do. And all this we will do.
##             Now, there are some who question the scale of our ambitions - who 
##             suggest that our system cannot tolerate too many big plans. Their 
##             memories are short. For they have forgotten what this country has 
##             already done; what free men and women can achieve when imagination 
##             is joined to common purpose, and necessity to courage.
##             What the cynics fail to understand is that the ground has shifted 
##             beneath them - that the stale political arguments that have consumed 
##             us for so long no longer apply. The question we ask today is not whether 
##             our government is too big or too small, but whether it works - whether 
##             it helps families find jobs at a decent wage, care they can afford, 
##             a retirement that is dignified. Where the answer is yes, we intend 
##             to move forward. Where the answer is no, programs will end. And those 
##             of us who manage the public&#39;s dollars will be held to account - to 
##             spend wisely, reform bad habits, and do our business in the light 
##             of day - because only then can we restore the vital trust between 
##             a people and their government.
##             Nor is the question before us whether the market is a force for good 
##             or ill. Its power to generate wealth and expand freedom is unmatched, 
##             but this crisis has reminded us that without a watchful eye, the market 
##             can spin out of control - and that a nation cannot prosper long when 
##             it favors only the prosperous. The success of our economy has always 
##             depended not just on the size of our Gross Domestic Product, but on 
##             the reach of our prosperity; on the ability to extend opportunity 
##             to every willing heart - not out of charity, but because it is the 
##             surest route to our common good.
##             As for our common defense, we reject as false the choice between our 
##             safety and our ideals. Our Founding Fathers, faced with perils we 
##             can scarcely imagine, drafted a charter to assure the rule of law 
##             and the rights of man, a charter expanded by the blood of generations. 
##             Those ideals still light the world, and we will not give them up for 
##             expedience&#39;s sake. And so to all other peoples and governments who 
##             are watching today, from the grandest capitals to the small village 
##             where my father was born: know that America is a friend of each nation 
##             and every man, woman, and child who seeks a future of peace and dignity, 
##             and we are ready to lead once more.
##             Recall that earlier generations faced down fascism and communism not 
##             just with missiles and tanks, but with the sturdy alliances and enduring 
##             convictions. They understood that our power alone cannot protect us, 
##             nor does it entitle us to do as we please. Instead, they knew that 
##             our power grows through its prudent use; our security emanates from 
##             the justness of our cause, the force of our example, the tempering 
##             qualities of humility and restraint.
##             We are the keepers of this legacy. Guided by these principles once 
##             more, we can meet those new threats that demand even greater effort 
##             - even greater cooperation and understanding between nations. We will 
##             begin to responsibly leave Iraq to its people, and forge a hard-earned 
##             peace in Afghanistan. With old friends and former foes, well work 
##             tirelessly to lessen the nuclear threat, and roll back the specter 
##             of a warming planet. We will not apologize for our way of life, nor 
##             will we waver in its defense, and for those who seek to advance their 
##             aims by inducing terror and slaughtering innocents, we say to you 
##             now that our spirit is stronger and cannot be broken; you cannot outlast 
##             us, and we will defeat you.
##             For we know that our patchwork heritage is a strength, not a weakness. 
##             We are a nation of Christians and Muslims, Jews and Hindus - and non-believers. 
##             We are shaped by every language and culture, drawn from every end 
##             of this Earth; and because we have tasted the bitter swill of civil 
##             war and segregation, and emerged from that dark chapter stronger and 
##             more united, we cannot help but believe that the old hatreds shall 
##             someday pass; that the lines of tribe shall soon dissolve; that as 
##             the world grows smaller, our common humanity shall reveal itself; 
##             and that America must play its role in ushering in a new era of peace.
##             To the Muslim world, we seek a new way forward, based on mutual interest 
##             and mutual respect. To those leaders around the globe who seek to 
##             sow conflict, or blame their society&#39;s ills on the West - know that 
##             your people will judge you on what you can build, not what you destroy. 
##             To those who cling to power through corruption and deceit and the 
##             silencing of dissent, know that you are on the wrong side of history; 
##             but that we will extend a hand if you are willing to unclench your 
##             fist.
##             To the people of poor nations, we pledge to work alongside you to 
##             make your farms flourish and let clean waters flow; to nourish starved 
##             bodies and feed hungry minds. And to those nations like ours that 
##             enjoy relative plenty, we say we can no longer afford indifference 
##             to the suffering outside our borders; nor can we consume the world&#39;s 
##             resources without regard to effect. For the world has changed, and 
##             we must change with it.
##             As we consider the road that unfolds before us, we remember with humble 
##             gratitude those brave Americans who, at this very hour, patrol far-off 
##             deserts and distant mountains. They have something to tell us, just 
##             as the fallen heroes who lie in Arlington whisper through the ages. 
##             We honor them not only because they are guardians of our liberty, 
##             but because they embody the spirit of service; a willingness to find 
##             meaning in something greater than themselves. And yet, at this moment 
##             - a moment that will define a generation - it is precisely this spirit 
##             that must inhabit us all.
##             For as much as government can do and must do, it is ultimately the 
##             faith and determination of the American people upon which this nation 
##             relies. It is the kindness to take in a stranger when the levees break, 
##             the selflessness of workers who would rather cut their hours than 
##             see a friend lose their job which sees us through our darkest hours. 
##             It is the firefighter&#39;s courage to storm a stairway filled with smoke, 
##             but also a parent&#39;s willingness to nurture a child, that finally decides 
##             our fate.
##             Our challenges may be new. The instruments with which we meet them 
##             may be new. But those values upon which our success depends - honesty 
##             and hard work, courage and fair play, tolerance and curiosity, loyalty 
##             and patriotism - these things are old. These things are true. They 
##             have been the quiet force of progress throughout our history. What 
##             is demanded then is a return to these truths. What is required of 
##             us now is a new era of responsibility - a recognition, on the part 
##             of every American, that we have duties to ourselves, our nation, and 
##             the world, duties that we do not grudgingly accept but rather seize 
##             gladly, firm in the knowledge that there is nothing so satisfying 
##             to the spirit, so defining of our character, than giving our all to 
##             a difficult task.
##             This is the price and the promise of citizenship.
##             This is the source of our confidence - the knowledge that God calls 
##             on us to shape an uncertain destiny.
##             This is the meaning of our liberty and our creed - why men and women 
##             and children of every race and every faith can join in celebration 
##             across this magnificent mall, and why a man whose father less than 
##             sixty years ago might not have been served at a local restaurant can 
##             now stand before you to take a most sacred oath.
##             So let us mark this day with remembrance, of who we are and how far 
##             we have traveled. In the year of America&#39;s birth, in the coldest of 
##             months, a small band of patriots huddled by dying campfires on the 
##             shores of an icy river. The capital was abandoned. The enemy was advancing. 
##             The snow was stained with blood. At a moment when the outcome of our 
##             revolution was most in doubt, the father of our nation ordered these 
##             words be read to the people:
##             &quot;Let it be told to the future world...that in the depth of winter, 
##             when nothing but hope and virtue could survive...that the city and 
##             the country, alarmed at one common danger, came forth to meet [it].&quot;
##             America. In the face of our common dangers, in this winter of our 
##             hardship, let us remember these timeless words. With hope and virtue, 
##             let us brave once more the icy currents, and endure what storms may 
##             come. Let it be said by our children&#39;s children that when we were 
##             tested we refused to let this journey end, that we did not turn back 
##             nor did we falter; and with eyes fixed on the horizon and God&#39;s grace 
##             upon us, we carried forth that great gift of freedom and delivered 
##             it safely to future generations.
##             Thank you. God bless you and God bless the United States of America.</code></pre>
<p>Here you can have a look at the different speeches you would like to
work on later that are available on the website.Just take away the “#”
symbol.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="co"># titles_speeches &lt;- obama_inaugural |&gt; </span></span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a>  <span class="co"># html_nodes(&quot;table p&quot;)</span></span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a><span class="co"># titles_speeches &lt;- sapply(titles_speeches, html_text, USE.NAMES = FALSE)</span></span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a></span>
<span id="cb42-6"><a href="#cb42-6" tabindex="-1"></a><span class="co"># cat(titles_speeches , sep = &quot;\n&quot;)</span></span></code></pre></div>
<p>Following on what you just learned, you can now explore with the
‘corpus’ and the ‘token’ functions how this speech is structured.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a>inaugural_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(inaugural_speech_text)</span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a>inaugural_speech_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(inaugural_df )</span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a>inaugural_speech_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(inaugural_speech_corpus)</span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" tabindex="-1"></a><span class="fu">summary</span>(inaugural_speech_corpus)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Text"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Types"],"name":[2],"type":["int"],"align":["right"]},{"label":["Tokens"],"name":[3],"type":["int"],"align":["right"]},{"label":["Sentences"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"text1","2":"939","3":"2692","4":"109","_rn_":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Transform the speech into a document-feature matrix (dmf)</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a>inaugural_speech_dfm <span class="ot">&lt;-</span> <span class="fu">dfm</span>(inaugural_speech_tokens)</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="fu">print</span>(inaugural_speech_dfm)</span></code></pre></div>
<pre><code>## Document-feature matrix of: 1 document, 901 features (0.00% sparse) and 0 docvars.
##        features
## docs    my fellow citizens : i stand here today humbled by
##   text1  2      1        1 4 3     2    1     6       1  8
## [ reached max_nfeat ... 891 more features ]</code></pre>
<p>Explore which are the most frequend words in the discoure.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="fu">topfeatures</span>(inaugural_speech_dfm )</span></code></pre></div>
<pre><code>##  the    ,    .  and   of   to  our   we that    a 
##  133  131  115  114   82   70   66   62   49   48</code></pre>
<p>To keep on working, let’s clean the speech a little.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a>inaugural_speech_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(inaugural_speech_corpus, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>, <span class="at">remove_numbers =</span> <span class="cn">TRUE</span>, <span class="at">remove_symbols =</span> <span class="cn">TRUE</span>)</span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a>inaugural_speech_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_remove</span>(inaugural_speech_tokens, <span class="fu">stopwords</span>(<span class="st">&quot;en&quot;</span>))</span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a>inaugural_speech_tokens  <span class="ot">&lt;-</span>  <span class="fu">tokens_remove</span>(inaugural_speech_tokens, <span class="fu">c</span>(<span class="st">&#39;the&#39;</span>,<span class="st">&#39;and&#39;</span>, <span class="st">&#39;that&#39;</span>,<span class="st">&#39;to&#39;</span>, <span class="st">&#39;can&#39;</span>, <span class="st">&#39;must&#39;</span>, <span class="st">&#39;of&#39;</span>, <span class="st">&#39;every&#39;</span>, <span class="st">&#39;words&#39;</span>, <span class="st">&#39;let&#39;</span>, <span class="st">&#39;end&#39;</span>, <span class="st">&#39;whether&#39;</span>))</span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a></span>
<span id="cb48-6"><a href="#cb48-6" tabindex="-1"></a>inaugural_speech_dfm <span class="ot">&lt;-</span> <span class="fu">dfm</span>(inaugural_speech_tokens)</span>
<span id="cb48-7"><a href="#cb48-7" tabindex="-1"></a></span>
<span id="cb48-8"><a href="#cb48-8" tabindex="-1"></a><span class="fu">topfeatures</span>(inaugural_speech_dfm)</span></code></pre></div>
<pre><code>##      us  nation     new america  people    less   today     now    time    work 
##      23      12      11       8       7       7       6       6       6       6</code></pre>
<p>Let’s see the wordcloud from this speech</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(inaugural_speech_dfm, <span class="at">max_words =</span> <span class="dv">50</span>)</span></code></pre></div>
<p><img src="Live_Tutorial_files/figure-html/unnamed-chunk-20-1.png" width="672" />
<strong>Step 2</strong> We’ll compare it with another speech, this time
with “An Honest Government - A Hopeful Future” which Obama hold at the
University of Nairobi under the topic: Our Past, Our Future &amp; Vision
for America (August 28, 2006).</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="co">#Save the link as object</span></span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a>obama_speeches_2 <span class="ot">&lt;-</span> <span class="st">&quot;http://obamaspeeches.com/088-An-Honest-Government-A-Hopeful-Future-Obama-Speech.htm&quot;</span></span>
<span id="cb51-3"><a href="#cb51-3" tabindex="-1"></a>obama_honest_gov <span class="ot">&lt;-</span> <span class="fu">read_html</span>(obama_speeches_2)</span></code></pre></div>
<p>With Selector Gadget we identify the structure in the html containing
the text. Copy it direct from the bar, do not click on the xpath
function.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a>honest_gov_speech_container <span class="ot">&lt;-</span> obama_honest_gov <span class="sc">|&gt;</span>  <span class="fu">html_nodes</span>(<span class="st">&quot;font p font&quot;</span>)</span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" tabindex="-1"></a><span class="co"># Extract the text from the container</span></span>
<span id="cb52-4"><a href="#cb52-4" tabindex="-1"></a>honest_gov_speech_text <span class="ot">&lt;-</span> <span class="fu">html_text</span>(honest_gov_speech_container)</span>
<span id="cb52-5"><a href="#cb52-5" tabindex="-1"></a></span>
<span id="cb52-6"><a href="#cb52-6" tabindex="-1"></a><span class="co"># Print the speech text</span></span>
<span id="cb52-7"><a href="#cb52-7" tabindex="-1"></a><span class="fu">cat</span>(honest_gov_speech_text, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## The first time I came to 
##               Kenya was in 1987. I had just finished three years of work as a 
##               community organizer in low-income neighborhoods of Chicago, and 
##               was about to enroll in law school. My sister, Auma, was teaching 
##               that year at this university, and so I came to stay with her for 
##               a month.
## My experience then was 
##               very different than it has been on this trip. Instead of a motorcade, 
##               we traveled in my sister&#39;s old VW Beetle, which even then was already 
##               ten years old. When it broke down in front of Uhuru Park, we had 
##               to push until some joakalis came to fix it by the side of the road. 
##               I slept on the couch of my sister&#39;s apartment, not a fancy hotel, 
##               and often took my meals at a small tea-house in downtown Nairobi. 
##               When we went upcountry, we traveled by train and matatu, with chickens 
##               and collard greens and sometimes babies placed in my lap.
## But it was a magical trip. 
##               To begin with, I discovered the warmth and sense of community that 
##               the people of Kenya possess - their sense of hopefulness even in 
##               the face of great difficulty. I discovered the beauty of the land, 
##               a beauty that haunts you long after you&#39;ve left.
## And most importantly for 
##               me, I discovered the story of my father&#39;s life, and the story of 
##               his father before him.
## I learned that my grandfather 
##               had been a cook for the British and, although he was a respected 
##               elder in his village, he was called &quot;boy&quot; by his employers 
##               for most of his life. I learned about the brutal repression of Operation 
##               Anvil, the days of rape and torture in the &quot;Pipeline&quot; 
##               camps, the lives that so many gave, and how my grandfather had been 
##               arrested briefly during this period, despite being at the periphery 
##               of Kenya&#39;s liberation struggles.
## I learned how my father 
##               had grown up in a tiny village called Alego, near Siaya, during 
##               this period of tumult. I began to understand and appreciate the 
##               distance he had traveled - from being a boy herding goats to a student 
##               at the University of Hawaii and Harvard University to the respected 
##               economist that he was upon his return to Kenya. In many ways, he 
##               embodied the new Africa of the early Sixties, a man who had obtained 
##               the knowledge of the Western world, and sought to bring it back 
##               home, where he hoped he could help create a new nation.
## And yet, I discovered that 
##               for all his education, my father&#39;s life ended up being filled with 
##               disappointments. His ideas about how Kenya should progress often 
##               put him at odds with the politics of tribe and patronage, and because 
##               he spoke his mind, sometimes to a fault, he ended up being fired 
##               from his job and prevented from finding work in the country for 
##               many, many years. And on a more personal level, because he never 
##               fully reconciled the traditions of his village with more modern 
##               conceptions of family - because he related to women as his father 
##               had, expecting them to obey him no matter what he did - his family 
##               life was unstable, and his children never knew him well.
## In many ways, then, my 
##               family&#39;s life reflects some of the contradictions of Kenya, and 
##               indeed, the African continent as a whole. The history of Africa 
##               is a history of ancient kingdoms and great traditions; the story 
##               of people fighting to be free from colonial rule; the heroism of 
##               not only of great men like Nkrumah and Kenyatta and Mandela, but 
##               also ordinary people who endured great hardship, from Ghana to South 
##               Africa, to secure self-determination in the face of great odds.
## But for all the progress 
##               that has been made, we must surely acknowledge that neither Kenya 
##               nor the African continent have yet fulfilled their potential - that 
##               the hopefulness of the post-colonial era has been replaced by cynicism 
##               and sometimes despair, and that true freedom has not yet been won 
##               for those struggling to live on less than a few shillings a day, 
##               for those who have fallen prey to HIV/AIDS or malaria, to those 
##               ordinary citizens who continue to find themselves trapped in the 
##               crossfire of war or ethnic conflict.
## One statistic powerfully 
##               describes this unfulfilled promise. In early 1960&#39;s, as Kenya was 
##               gaining its independence, its gross national product was not very 
##               different from that of South Korea. Today, South Korea&#39;s economy 
##               is forty times larger than Kenya&#39;s.
## How can we explain this 
##               fact? Certainly it is not due to lack of effort on the part of ordinary 
##               Kenyans - we know how hard Kenyans are willing to work, the tremendous 
##               sacrifices that Kenyan mothers make for their children, the Herculean 
##               efforts that Kenyan fathers make for their families. We know as 
##               well the talent, the intelligence, and the creativity that exists 
##               in this country. And we know how much this land is blessed - just 
##               as the entire African continent is blessed - with great gifts and 
##               riches.
## So what explains this? 
##               I believe there a number of factors at work.
## Kenya, like many African 
##               nations did not come of age under the best historical circumstances. 
##               It suffers from the legacy of colonialism, of national boundaries 
##               that were drawn without regard to the political and tribal alignments 
##               of indigenous peoples, and that therefore fed conflict and tribal 
##               strife.
## Kenya was also forced to 
##               rapidly move from a highly agrarian to a more urban, industrialized 
##               nation. This means that the education and health care systems - 
##               issues that my own nation more than 200 years old still struggles 
##               with - lag behind, impacting its development.
## Third, Kenya is hurt from 
##               factors unique to Africa&#39;s geography and place in the world -- disease, 
##               distance from viable markets and especially terms of trade. When 
##               African nations were just gaining independence, industrialized nations 
##               had decades of experience building their domestic economies and 
##               navigating the international financial system. And, as Frederick 
##               Douglass once stated: &quot;Power concedes nothing without a demand. 
##               It never did, and it never will.&quot; As a result, many African 
##               nations have been asked to liberalize their markets without reciprocal 
##               concessions from mature economies. This lack of access for Africa&#39;s 
##               agriculture and commodities has restricted an important engine of 
##               economic growth. Other issues, such as resource extraction and the 
##               drain of human capital have also been major factors.
## As a Senator from the United 
##               States, I believe that my country, and other nations, have an obligation 
##               and self-interest in being full partners with Kenya and with Africa. 
##               And, I will do my part to shape an intelligent foreign policy that 
##               promotes peace and prosperity. A foreign policy that gives hope 
##               and opportunity to the people of this great continent.
## But, Kenya must do its 
##               part. It cannot wait for other nations to act first. The hard truth 
##               is that nations, by and large, will act in their self-interest and 
##               if Kenya does not act, it will fall behind.
## It&#39;s more than just history 
##               and outside influences that explain why Kenya lags behind. Like 
##               many nations across this continent, where Kenya is failing is in 
##               its ability to create a government that is transparent and accountable. 
##               One that serves its people and is free from corruption.
## There is no doubt that 
##               what Kenyans have accomplished with this independence is both impressive 
##               and inspiring. Among African nations, Kenya remains a model for 
##               representative democracy - a place where many different ethnic factions 
##               have found a way to live and work together in peace and stability. 
##               You enjoy a robust civil society; a press that&#39;s free, fair, and 
##               honest; and a strong partnership with my own country that has resulted 
##               in critical cooperation on terrorist issues, real strides in fighting 
##               disease and poverty, and an important alliance on fostering regional 
##               stability.
## And yet, the reason I speak 
##               of the freedom that you fought so hard to win is because today that 
##               freedom is in jeopardy. It is being threatened by corruption.
## Corruption is not a new 
##               problem. It&#39;s not just a Kenyan problem, or an African problem. 
##               It&#39;s a human problem, and it has existed in some form in almost 
##               every society. My own city of Chicago has been the home of some 
##               of the most corrupt local politics in American history, from patronage 
##               machines to questionable elections. In just the last year, our own 
##               U.S. Congress has seen a representative resign after taking bribes, 
##               and several others fall under investigation for using their public 
##               office for private gain.
## But while corruption is 
##               a problem we all share, here in Kenya it is a crisis - a crisis 
##               that&#39;s robbing an honest people of the opportunities they have fought 
##               for - the opportunity they deserve.
## I know that while recent 
##               reports have pointed to strong economic growth in this country, 
##               56% of Kenyans still live in poverty. And I know that the vast majority 
##               of people in this country desperately want to change this.
## It is painfully obvious 
##               that corruption stifles development - it siphons off scarce resources 
##               that could improve infrastructure, bolster education systems, and 
##               strengthen public health. It stacks the deck so high against entrepreneurs 
##               that they cannot get their job-creating ideas off the ground. In 
##               fact, one recent survey showed that corruption in Kenya costs local 
##               firms 6% of their revenues, the difference between good-paying jobs 
##               in Kenya or somewhere else. And corruption also erodes the state 
##               from the inside out, sickening the justice system until there is 
##               no justice to be found, poisoning the police forces until their 
##               presence becomes a source of insecurity rather than comfort.
## Corruption has a way of 
##               magnifying the very worst twists of fate. It makes it impossible 
##               to respond effectively to crises -- whether it&#39;s the HIV/AIDS pandemic 
##               or malaria or crippling drought.
## What&#39;s worse - corruption 
##               can also provide opportunities for those who would harness the fear 
##               and hatred of others to their agenda and ambitions.
## It can shield a war criminal 
##               - even one like Felicien Kabuga, suspected of helping to finance 
##               and orchestrate the Rwandan genocide - by allowing him to purchase 
##               safe haven for a time and robbing all humanity of the opportunity 
##               to bring the criminal to justice.
## Terrorist attacks - like 
##               those that have shed Kenyan blood and struck at the heart of the 
##               Kenyan economy - are facilitated by customs and border officers 
##               who can be paid off, by police forces so crippled by corruption 
##               that they do not protect the personal safety of Kenyans walking 
##               the streets of Nairobi, and by forged documents that are easy to 
##               find in a climate where graft and fraud thrive.
## Some of the worst actors 
##               on the international stage can also take advantage of the collective 
##               exhaustion and outrage that people feel with official corruption, 
##               as we&#39;ve seen with Islamic extremists who promise purification, 
##               but deliver totalitarianism. Endemic corruption opens the door to 
##               this kind of movement, and in its wake comes a new set of distortions 
##               and betrayals of public trust.
## In the end, if the people 
##               cannot trust their government to do the job for which it exists 
##               - to protect them and to promote their common welfare - all else 
##               is lost. And this is why the struggle against corruption is one 
##               of the great struggles of our time.
## 
##               The good news is that there are already signs of progress here. 
##               Willingness to report corruption is increasingly significantly in 
##               Kenya. The Kenyan media has been courageous in uncovering and reporting 
##               on some of the most blatant abuses of the system, and there has 
##               been a growing recognition among people and politicians that this 
##               is a critical issue.
## Among other things, this 
##               recognition resulted in the coalition that came to power in the 
##               December elections of 2002. This coalition succeeded by promising 
##               change, and their early gestures - the dismissal of the shaky judges, 
##               the renewed vigor of the investigation into the Goldenberg scandal, 
##               the calls for real disclosure of elected officials&#39; personal wealth 
##               - were all promising.
## But elections are not enough. 
##               In a true democracy, it is what happens between elections that is 
##               the true measure of how a government treats its people.
## Today, we&#39;re starting to 
##               see that the Kenyan people want more than a simple changing of the 
##               guard, more than piecemeal reforms to a crisis that&#39;s crippling 
##               their country. The Kenyan people are crying out for real change, 
##               and whether one voted orange or banana in last year&#39;s referendum, 
##               the message that many Kenyans seemed to be sending was one of dissatisfaction 
##               with the pace of reform, and real frustration with continued tolerance 
##               of corruption at high levels.
## And so we know that there 
##               is more work to be done - more reforms to be made. I don&#39;t have 
##               all the solutions or think that they&#39;ll be easy, but there are a 
##               few places that a country truly committed to reform could start.
## We know that the temptation 
##               to take a bribe is greater when you&#39;re not making enough on the 
##               job. And we also know that the more people there are on the government 
##               payroll, the more likely it is that someone will be encouraged to 
##               take a bribe. So if the government found ways to downsize the bureaucracy 
##               - to cut out the positions that aren&#39;t necessary or useful - it 
##               could use the extra money to increase the salary of other government 
##               officials.
## Of course, the best way 
##               to reduce bureaucracy and increase pay is to create more private 
##               sector jobs. And the way to create good jobs is when the rules of 
##               a society are transparent - when there&#39;s a clear and advertised 
##               set of laws and regulations regarding how to start a business, what 
##               it takes to own property, how to go about getting a loan - there 
##               is less of a chance that some corrupt bureaucrat will make up his 
##               own rules that suit only his interests. Clarifying these rules and 
##               focusing resources on building a judicial system that can enforce 
##               them and resolve disputes should be a primary goal of any government 
##               suffering from corruption.
## In addition, we know that 
##               the more information the public is provided, the easier it will 
##               be for your Kenyan brothers and sisters out in the villages to evaluate 
##               whether they are being treated fairly by their public servants or 
##               not. Wealth declarations do little good if no one can access them, 
##               and accountability in government spending is not possible if no 
##               one knows how much was available and allocated to a given project 
##               in the first place.
## Finally, ethnic-based tribal 
##               politics has to stop. It is rooted in the bankrupt idea that the 
##               goal of politics or business is to funnel as much of the pie as 
##               possible to one&#39;s family, tribe, or circle with little regard for 
##               the public good. It stifles innovation and fractures the fabric 
##               of the society. Instead of opening businesses and engaging in commerce, 
##               people come to rely on patronage and payback as a means of advancing. 
##               Instead of unifying the country to move forward on solving problems, 
##               it divides neighbor from neighbor.
## An accountable, transparent 
##               government can break this cycle. When people are judged by merit, 
##               not connections, then the best and brightest can lead the country, 
##               people will work hard, and the entire economy will grow - everyone 
##               will benefit and more resources will be available for all, not just 
##               select groups.
## Of course, in the end, 
##               one of the strongest weapons your country has against corruption 
##               is the ability of you, the people, to stand up and speak out about 
##               the injustices you see. The Kenyan people are the ultimate guardians 
##               against abuses.
## The world knows the names 
##               of Wangari Maathai and John Githongo, who are fighting against the 
##               insidious corruption that has weakened Kenya. But there are so many 
##               others, some of whom I&#39;m meeting during my visit here - Betty Murungi, 
##               Ken Njau, Jane Onyango, Maina Kiai, Milly Odhiombo, and Hussein 
##               Khalid. As well as numerous Kenyan men and women who have refused 
##               to pay bribes to get civil servants to perform their duties; the 
##               auditors and inspectors general who have done the job before them 
##               accurately and fairly, regardless of where the facts have led; the 
##               journalists who asked questions and pushed for answers when it may 
##               have been more lucrative to look the other way, or whip up a convenient 
##               fiction. And then there are anonymous Kenyan whistleblowers who 
##               show us what is, so that we can all work together to demand what 
##               should be.
## By rejecting the insulting 
##               idea that corruption is somehow a part of Kenyan culture, these 
##               heroes reveal the very opposite - they reveal a strength and integrity 
##               of character that can build a great country, a great future. By 
##               focusing on building strong, independent institutions - like an 
##               anti-corruption commission with real authority - rather than cults 
##               of personality, they make a contribution to their country that will 
##               last longer than their own lives. They fight the fight of our time.
## Looking out at this crowd 
##               of young people, I have faith that you will fight this fight too.
## You will decide if your 
##               leaders will be held accountable, or if you will look the other 
##               way.
## You will decide if the 
##               standards and the rules will be the same for everyone - regardless 
##               of ethnicity or of wealth.
## And you will determine 
##               the direction of this country in the 21st century - whether the 
##               hard work of the many is lost to the selfish desires of a few, or 
##               whether you build an open, honest, stronger Kenya where everyone 
##               rises together.
## This is the Kenya that 
##               so many who came before you envisioned - all those men and women 
##               who struggled and sacrificed and fought for the freedom you enjoy 
##               today.
## I know that honoring their 
##               memory and making that freedom real may seem like an impossible 
##               task - an effort bigger than you can imagine - but sometimes all 
##               it takes to move us there is doing what little you can to right 
##               the wrongs you see.
## As I said at the outset, 
##               I did not know my father well - he returned to Kenya from America 
##               when I was still young. Since that time I have known him through 
##               stories - those my mother would tell and those I heard from my relatives 
##               here in Kenya on my last trip to this country.
## I know from these stories 
##               that my father was not a perfect man - that he made his share of 
##               mistakes and disappointed his share of people in his lifetime.
## As our parents&#39; children, 
##               we have the opportunity to learn from these mistakes and disappointments. 
##               We have the opportunity to muster the courage to fulfill the promise 
##               of our forefathers and lead our great nations towards a better future.
## In today&#39;s Kenya - a Kenya 
##               already more open and less repressive than in my father&#39;s day - 
##               it is that courage that will bring the reform so many of you so 
##               desperately want and deserve. I wish all of you luck in finding 
##               this courage in the days and months to come, and I want you to know 
##               that as your ally, your friend, and your brother, I will be there 
##               to help in any way I can. Thank you.</code></pre>
<p>Following on what you just learned, you can now explore with the
‘corpus’ and the ‘token’ functions how this speech is structured.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a>honest_gov_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(honest_gov_speech_text)</span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a>honest_gov_speech_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(honest_gov_df)</span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a>honest_gov_speech_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(honest_gov_speech_corpus)</span>
<span id="cb54-4"><a href="#cb54-4" tabindex="-1"></a></span>
<span id="cb54-5"><a href="#cb54-5" tabindex="-1"></a><span class="fu">summary</span>(honest_gov_speech_corpus)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Text"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Types"],"name":[2],"type":["int"],"align":["right"]},{"label":["Tokens"],"name":[3],"type":["int"],"align":["right"]},{"label":["Sentences"],"name":[4],"type":["int"],"align":["right"]}],"data":[{"1":"text1","2":"46","3":"63","4":"3","_rn_":"1"},{"1":"text2","2":"78","3":"118","4":"5","_rn_":"2"},{"1":"text3","2":"39","3":"56","4":"3","_rn_":"3"},{"1":"text4","2":"20","3":"24","4":"1","_rn_":"4"},{"1":"text5","2":"58","3":"91","4":"2","_rn_":"5"},{"1":"text6","2":"76","3":"111","4":"3","_rn_":"6"},{"1":"text7","2":"86","3":"134","4":"3","_rn_":"7"},{"1":"text8","2":"61","3":"93","4":"2","_rn_":"8"},{"1":"text9","2":"70","3":"98","4":"1","_rn_":"9"},{"1":"text10","2":"40","3":"47","4":"3","_rn_":"10"},{"1":"text11","2":"65","3":"99","4":"4","_rn_":"11"},{"1":"text12","2":"15","3":"15","4":"2","_rn_":"12"},{"1":"text13","2":"40","3":"52","4":"2","_rn_":"13"},{"1":"text14","2":"42","3":"50","4":"2","_rn_":"14"},{"1":"text15","2":"97","3":"138","4":"7","_rn_":"15"},{"1":"text16","2":"49","3":"68","4":"3","_rn_":"16"},{"1":"text17","2":"35","3":"46","4":"3","_rn_":"17"},{"1":"text18","2":"40","3":"51","4":"3","_rn_":"18"},{"1":"text19","2":"77","3":"103","4":"3","_rn_":"19"},{"1":"text20","2":"27","3":"33","4":"2","_rn_":"20"},{"1":"text21","2":"69","3":"99","4":"6","_rn_":"21"},{"1":"text22","2":"31","3":"38","4":"1","_rn_":"22"},{"1":"text23","2":"32","3":"43","4":"2","_rn_":"23"},{"1":"text24","2":"89","3":"118","4":"4","_rn_":"24"},{"1":"text25","2":"31","3":"36","4":"2","_rn_":"25"},{"1":"text26","2":"24","3":"25","4":"1","_rn_":"26"},{"1":"text27","2":"38","3":"48","4":"1","_rn_":"27"},{"1":"text28","2":"57","3":"74","4":"1","_rn_":"28"},{"1":"text29","2":"53","3":"67","4":"2","_rn_":"29"},{"1":"text30","2":"41","3":"53","4":"2","_rn_":"30"},{"1":"text31","2":"46","3":"62","4":"3","_rn_":"31"},{"1":"text32","2":"49","3":"67","4":"2","_rn_":"32"},{"1":"text33","2":"25","3":"30","4":"2","_rn_":"33"},{"1":"text34","2":"62","3":"85","4":"2","_rn_":"34"},{"1":"text35","2":"38","3":"48","4":"2","_rn_":"35"},{"1":"text36","2":"58","3":"87","4":"3","_rn_":"36"},{"1":"text37","2":"84","3":"122","4":"3","_rn_":"37"},{"1":"text38","2":"65","3":"83","4":"2","_rn_":"38"},{"1":"text39","2":"66","3":"101","4":"5","_rn_":"39"},{"1":"text40","2":"43","3":"59","4":"2","_rn_":"40"},{"1":"text41","2":"35","3":"48","4":"2","_rn_":"41"},{"1":"text42","2":"118","3":"162","4":"4","_rn_":"42"},{"1":"text43","2":"62","3":"88","4":"3","_rn_":"43"},{"1":"text44","2":"18","3":"20","4":"1","_rn_":"44"},{"1":"text45","2":"17","3":"20","4":"1","_rn_":"45"},{"1":"text46","2":"19","3":"23","4":"1","_rn_":"46"},{"1":"text47","2":"37","3":"47","4":"1","_rn_":"47"},{"1":"text48","2":"26","3":"31","4":"1","_rn_":"48"},{"1":"text49","2":"41","3":"48","4":"1","_rn_":"49"},{"1":"text50","2":"47","3":"60","4":"2","_rn_":"50"},{"1":"text51","2":"26","3":"31","4":"1","_rn_":"51"},{"1":"text52","2":"32","3":"43","4":"2","_rn_":"52"},{"1":"text53","2":"56","3":"88","4":"3","_rn_":"53"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Transform the speech into a document-feature matrix (dmf).</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a>honest_gov_speech_dfm <span class="ot">&lt;-</span> <span class="fu">dfm</span>(honest_gov_speech_tokens)</span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a></span>
<span id="cb55-3"><a href="#cb55-3" tabindex="-1"></a><span class="fu">print</span>(honest_gov_speech_dfm)</span></code></pre></div>
<pre><code>## Document-feature matrix of: 53 documents, 1,080 features (95.53% sparse) and 0 docvars.
##        features
## docs    the first time i came to kenya was in 1987
##   text1   1     1    1 3    2  3     1   3  3    1
##   text2   3     0    0 1    1  2     0   2  4    0
##   text3   5     0    0 2    0  1     1   1  1    0
##   text4   2     0    0 1    0  0     0   0  0    0
##   text5   6     0    0 2    0  0     0   2  2    0
##   text6   7     0    0 2    0  5     1   1  2    0
## [ reached max_ndoc ... 47 more documents, reached max_nfeat ... 1,070 more features ]</code></pre>
<p>Explore which are the most frequend words in the discoure.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="fu">topfeatures</span>(honest_gov_speech_dfm )</span></code></pre></div>
<pre><code>##  the    ,    .  and   of   to    a that   in   is 
##  173  160  126  125  117   94   76   73   61   46</code></pre>
<p>To keep on working, let’s clean the speech a little.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a>honest_gov_speech_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(honest_gov_speech_corpus, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>, <span class="at">remove_numbers =</span> <span class="cn">TRUE</span>, <span class="at">remove_symbols =</span> <span class="cn">TRUE</span>)</span>
<span id="cb59-2"><a href="#cb59-2" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" tabindex="-1"></a>honest_gov_speech_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_remove</span>(honest_gov_speech_tokens, <span class="fu">stopwords</span>(<span class="st">&quot;en&quot;</span>))</span>
<span id="cb59-4"><a href="#cb59-4" tabindex="-1"></a>honest_gov_speech_tokens  <span class="ot">&lt;-</span>  <span class="fu">tokens_remove</span>(honest_gov_speech_tokens, <span class="fu">c</span>(<span class="st">&#39;the&#39;</span>,<span class="st">&#39;and&#39;</span>, <span class="st">&#39;that&#39;</span>,<span class="st">&#39;to&#39;</span>, <span class="st">&#39;can&#39;</span>, <span class="st">&#39;must&#39;</span>, <span class="st">&#39;of&#39;</span>, <span class="st">&#39;every&#39;</span>, <span class="st">&#39;words&#39;</span>, <span class="st">&#39;let&#39;</span>, <span class="st">&#39;end&#39;</span>, <span class="st">&#39;whether&#39;</span>, <span class="st">&#39;kenya&#39;</span>, <span class="st">&#39;kenyan&#39;</span>, <span class="st">&#39;kenyans&#39;</span>, <span class="st">&#39;also&#39;</span>, <span class="st">&#39;sometimes&#39;</span>))</span>
<span id="cb59-5"><a href="#cb59-5" tabindex="-1"></a></span>
<span id="cb59-6"><a href="#cb59-6" tabindex="-1"></a><span class="co"># We removed &quot;Kenya&quot; and &quot;kenyan&quot; to focus more on the topics around it, since we already know that&#39;s the main topic. We want to know what are other concepts associated to it. </span></span>
<span id="cb59-7"><a href="#cb59-7" tabindex="-1"></a></span>
<span id="cb59-8"><a href="#cb59-8" tabindex="-1"></a>honest_gov_speech_dfm <span class="ot">&lt;-</span> <span class="fu">dfm</span>(honest_gov_speech_tokens)</span>
<span id="cb59-9"><a href="#cb59-9" tabindex="-1"></a></span>
<span id="cb59-10"><a href="#cb59-10" tabindex="-1"></a><span class="fu">topfeatures</span>(honest_gov_speech_dfm)</span></code></pre></div>
<pre><code>##     people corruption    country       many       know      great        one 
##         21         19         15         14         13         11         10 
##    nations       work government 
##         10          9          9</code></pre>
<p>Let’s see the Word Cloud from this speech</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(honest_gov_speech_dfm, <span class="at">max_words =</span> <span class="dv">40</span>)</span></code></pre></div>
<p><img src="Live_Tutorial_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
